"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/next-safe-action";
exports.ids = ["vendor-chunks/next-safe-action"];
exports.modules = {

/***/ "(ssr)/./node_modules/next-safe-action/dist/hooks.mjs":
/*!******************************************************!*\
  !*** ./node_modules/next-safe-action/dist/hooks.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAction: () => (/* binding */ useAction),\n/* harmony export */   useOptimisticAction: () => (/* binding */ useOptimisticAction)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* __next_internal_client_entry_do_not_use__ useAction,useOptimisticAction auto */ // src/hooks.ts\n\n// src/hooks-utils.ts\n\nvar getActionStatus = ({ isIdle, isExecuting, result })=>{\n    if (isIdle) {\n        return \"idle\";\n    } else if (isExecuting) {\n        return \"executing\";\n    } else if (typeof result.validationErrors !== \"undefined\" || typeof result.bindArgsValidationErrors !== \"undefined\" || typeof result.serverError !== \"undefined\") {\n        return \"hasErrored\";\n    } else {\n        return \"hasSucceeded\";\n    }\n};\nvar getActionShorthandStatusObject = ({ status, isTransitioning })=>{\n    return {\n        isIdle: status === \"idle\",\n        isExecuting: status === \"executing\",\n        isTransitioning,\n        isPending: status === \"executing\" || isTransitioning,\n        hasSucceeded: status === \"hasSucceeded\",\n        hasErrored: status === \"hasErrored\"\n    };\n};\nvar useExecuteOnMount = (args)=>{\n    const mounted = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{\n        const t = setTimeout(()=>{\n            if (args.executeOnMount && !mounted.current) {\n                args.executeFn(args.executeOnMount.input);\n                mounted.current = true;\n            }\n        }, args.executeOnMount?.delayMs ?? 0);\n        return ()=>{\n            clearTimeout(t);\n        };\n    }, [\n        args\n    ]);\n};\nvar useActionCallbacks = ({ result, input, status, cb })=>{\n    const onExecuteRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(cb?.onExecute);\n    const onSuccessRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(cb?.onSuccess);\n    const onErrorRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(cb?.onError);\n    const onSettledRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(cb?.onSettled);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{\n        const onExecute = onExecuteRef.current;\n        const onSuccess = onSuccessRef.current;\n        const onError = onErrorRef.current;\n        const onSettled = onSettledRef.current;\n        const executeCallbacks = async ()=>{\n            switch(status){\n                case \"executing\":\n                    await Promise.resolve(onExecute?.({\n                        input\n                    }));\n                    break;\n                case \"hasSucceeded\":\n                    await Promise.all([\n                        Promise.resolve(onSuccess?.({\n                            data: result?.data,\n                            input\n                        })),\n                        Promise.resolve(onSettled?.({\n                            result,\n                            input\n                        }))\n                    ]);\n                    break;\n                case \"hasErrored\":\n                    await Promise.all([\n                        Promise.resolve(onError?.({\n                            error: result,\n                            input\n                        })),\n                        Promise.resolve(onSettled?.({\n                            result,\n                            input\n                        }))\n                    ]);\n                    break;\n            }\n        };\n        executeCallbacks().catch(console.error);\n    }, [\n        status,\n        result,\n        input\n    ]);\n};\n// src/hooks.ts\nvar useAction = (safeActionFn, utils)=>{\n    const [isTransitioning, startTransition] = react__WEBPACK_IMPORTED_MODULE_0__.useTransition();\n    const [result, setResult] = react__WEBPACK_IMPORTED_MODULE_0__.useState({});\n    const [clientInput, setClientInput] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n    const [isExecuting, setIsExecuting] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n    const [isIdle, setIsIdle] = react__WEBPACK_IMPORTED_MODULE_0__.useState(true);\n    const status = getActionStatus({\n        isExecuting,\n        result,\n        isIdle\n    });\n    const execute = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((input)=>{\n        setTimeout(()=>{\n            setIsIdle(false);\n            setClientInput(input);\n            setIsExecuting(true);\n        }, 0);\n        startTransition(()=>{\n            safeActionFn(input).then((res)=>setResult(res ?? {})).catch((e)=>{\n                throw e;\n            }).finally(()=>{\n                setIsExecuting(false);\n            });\n        });\n    }, [\n        safeActionFn\n    ]);\n    const executeAsync = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((input)=>{\n        const fn = new Promise((resolve, reject)=>{\n            setTimeout(()=>{\n                setIsIdle(false);\n                setClientInput(input);\n                setIsExecuting(true);\n            }, 0);\n            startTransition(()=>{\n                safeActionFn(input).then((res)=>{\n                    setResult(res ?? {});\n                    resolve(res);\n                }).catch((e)=>{\n                    reject(e);\n                }).finally(()=>{\n                    setIsExecuting(false);\n                });\n            });\n        });\n        return fn;\n    }, [\n        safeActionFn\n    ]);\n    const reset = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>{\n        setIsIdle(true);\n        setClientInput(void 0);\n        setResult({});\n    }, []);\n    useExecuteOnMount({\n        executeOnMount: utils?.executeOnMount,\n        executeFn: execute\n    });\n    useActionCallbacks({\n        result: result ?? {},\n        input: clientInput,\n        status,\n        cb: {\n            onExecute: utils?.onExecute,\n            onSuccess: utils?.onSuccess,\n            onError: utils?.onError,\n            onSettled: utils?.onSettled\n        }\n    });\n    return {\n        execute,\n        executeAsync,\n        input: clientInput,\n        result,\n        reset,\n        status,\n        ...getActionShorthandStatusObject({\n            status,\n            isTransitioning\n        })\n    };\n};\nvar useOptimisticAction = (safeActionFn, utils)=>{\n    const [isTransitioning, startTransition] = react__WEBPACK_IMPORTED_MODULE_0__.useTransition();\n    const [result, setResult] = react__WEBPACK_IMPORTED_MODULE_0__.useState({});\n    const [clientInput, setClientInput] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n    const [isExecuting, setIsExecuting] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n    const [isIdle, setIsIdle] = react__WEBPACK_IMPORTED_MODULE_0__.useState(true);\n    const [optimisticState, setOptimisticValue] = react__WEBPACK_IMPORTED_MODULE_0__.useOptimistic(utils.currentState, utils.updateFn);\n    const status = getActionStatus({\n        isExecuting,\n        result,\n        isIdle\n    });\n    const execute = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((input)=>{\n        setTimeout(()=>{\n            setIsIdle(false);\n            setClientInput(input);\n            setIsExecuting(true);\n        }, 0);\n        startTransition(()=>{\n            setOptimisticValue(input);\n            safeActionFn(input).then((res)=>setResult(res ?? {})).catch((e)=>{\n                throw e;\n            }).finally(()=>{\n                setIsExecuting(false);\n            });\n        });\n    }, [\n        safeActionFn,\n        setOptimisticValue\n    ]);\n    const executeAsync = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((input)=>{\n        const fn = new Promise((resolve, reject)=>{\n            setTimeout(()=>{\n                setIsIdle(false);\n                setClientInput(input);\n                setIsExecuting(true);\n            }, 0);\n            startTransition(()=>{\n                setOptimisticValue(input);\n                safeActionFn(input).then((res)=>{\n                    setResult(res ?? {});\n                    resolve(res);\n                }).catch((e)=>{\n                    reject(e);\n                }).finally(()=>{\n                    setIsExecuting(false);\n                });\n            });\n        });\n        return fn;\n    }, [\n        safeActionFn,\n        setOptimisticValue\n    ]);\n    const reset = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>{\n        setIsIdle(true);\n        setClientInput(void 0);\n        setResult({});\n    }, []);\n    useExecuteOnMount({\n        executeOnMount: utils?.executeOnMount,\n        executeFn: execute\n    });\n    useActionCallbacks({\n        result: result ?? {},\n        input: clientInput,\n        status,\n        cb: {\n            onExecute: utils.onExecute,\n            onSuccess: utils.onSuccess,\n            onError: utils.onError,\n            onSettled: utils.onSettled\n        }\n    });\n    return {\n        execute,\n        executeAsync,\n        input: clientInput,\n        result,\n        optimisticState,\n        reset,\n        status,\n        ...getActionShorthandStatusObject({\n            status,\n            isTransitioning\n        })\n    };\n};\n //# sourceMappingURL=hooks.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYWZlLWFjdGlvbi9kaXN0L2hvb2tzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRXVCOztBQ0ZBO0FBT2hCLElBQU1DLGtCQUFrQixDQU83QixFQUFBQyxNQUFBLEVBQUFDLFdBQUEsRUFBQUMsTUFBQTtJQUFBLElBQ0RGLFFBQUE7UUFDQTtJQUFBLE9BQ0EsSUFBQUMsYUFBQTtRQUNELE9BSXdCO0lBQ3ZCLE9BQUksSUFDSCxPQUFBQyxPQUFPQyxnQkFBQSxvQkFDUixPQUFBRCxPQUFXRSx3QkFBYSxvQkFDdkIsT0FBQUYsT0FBT0csV0FBQSxrQkFDUjtRQUtDO0lBQU8sT0FDUjtRQUNDO0lBQU87QUFFVDtBQUVPLElBQU1DLGlDQUFpQyxDQUFDLEVBQUFDLE1BQUEsRUFBQUMsZUFBQTtJQUFBLE9BQzlDO1FBQ0FSLFFBQUFPLFdBQUE7UUFDRE4sYUFHMkJNLFdBQUE7UUFDMUJDO1FBQU9DLFdBQ0VGLFdBQVcsZUFBQUM7UUFBQUUsY0FDbkJILFdBQWE7UUFBV0ksWUFDeEJKLFdBQUE7SUFBQTtBQUNxQztBQUNaLElBQ3pCSyxvQkFBWSxDQUFBQztJQUFXLE1BQ3hCQyxVQUFBaEIseUNBQUE7SUFDREEsNENBQUE7UUFFTyxNQUFNbUIsSUFBQUMsV0FBQTtZQUtaLElBQUFMLEtBQU1NLGNBQWdCLEtBQU9MLFFBQUtNLE9BQUE7Z0JBRTVCUCxLQUFBUSxTQUFVLENBQUFSLEtBQU1NLGNBQUEsQ0FBQUcsS0FBQTtnQkFDckJSLFFBQU1NLE9BQUk7WUFDVDtRQUNDLEdBQUFQLEtBQUFNLGNBQWUsRUFBQUksV0FBSztRQUNwQjtZQUFrQkMsYUFDbkJQO1FBQUE7SUFHRDtRQUFBSjtLQUFBO0FBQ0M7QUFBYyxJQUNmWSxxQkFBQSxHQUFBdkIsTUFBQSxFQUFBb0IsS0FBQSxFQUFBZixNQUFBLEVBQUFtQixFQUFBO0lBQUEsTUFDR0MsZUFBSzdCLHlDQUFBLENBQUE0QixJQUFBRTtJQUNWLE1BQUFDLGVBQUEvQix5Q0FB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RUFBQUM7b0JBQ0FQLFVBQUFPLE9BQWE7b0JBRVhuQixRQUFBbUI7Z0JBQ0EsR0FBV2YsS0FDWCxDQUNBLENBQUFnQjtvQkFDQUssT0FBQUw7Z0JBQVEsR0FHUkMsT0FBQTtvQkFBb0JMLGVBQ3BCO2dCQUFBO1lBQ0Y7UUFHRjtRQUFPLE9BQ1JRO0lBQUEsR0FFRDtRQUFBakI7UUFBQXVCO0tBQUE7SUFHQyxNQUFBSixRQUFVaEIsOENBQUk7UUFDZE8sVUFBQTtRQUNBRixlQUFZO1FBQ2JILFVBQUs7SUFFTDtJQUFrQnJDLGtCQUNqQjtRQUF1Qk8sZ0JBQ1owQixPQUFBMUI7UUFDWkUsV0FBQzJDO0lBRUQ7SUFBbUJ2QyxtQkFDVjtRQUFXdkIsUUFDbkJBLFVBQU87UUFBQW9CLE9BQ1A2QjtRQUFBNUM7UUFDSW1CLElBQ0g7WUFBaUJFLFdBQ2pCaUIsTUFBV2pCLFNBQU07WUFBQUUsV0FDakJlLE1BQVNmLFNBQU07WUFBQUUsU0FDZmEsTUFBV2IsT0FBTTtZQUFBRSxXQUNsQlcsTUFBQVgsU0FBQTtRQUNEO0lBRUE7SUFBTyxPQUNOO1FBQUE4QjtRQUNBTDtRQUNPckMsT0FDUDZCO1FBQUFqRDtRQUNBZ0U7UUFDQUg7UUFDQXhEO1FBRUQsR0FBQUQsK0JBQUE7WUFBQUM7WUFBQUM7UUFBQTtJQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hhZGNuLXBvcnRmb2xpby8uLi9zcmMvaG9va3MudHM/MGU1YyIsIndlYnBhY2s6Ly9zaGFkY24tcG9ydGZvbGlvLy4uL3NyYy9ob29rcy11dGlscy50cz80MGI2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7fSBmcm9tIFwicmVhY3QvZXhwZXJpbWVudGFsXCI7XG5pbXBvcnQgdHlwZSB7fSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgdHlwZSB7IEluZmVySW4sIFNjaGVtYSB9IGZyb20gXCIuL2FkYXB0ZXJzL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRBY3Rpb25TaG9ydGhhbmRTdGF0dXNPYmplY3QsIGdldEFjdGlvblN0YXR1cywgdXNlQWN0aW9uQ2FsbGJhY2tzLCB1c2VFeGVjdXRlT25Nb3VudCB9IGZyb20gXCIuL2hvb2tzLXV0aWxzXCI7XG5pbXBvcnQgdHlwZSB7XG5cdEhvb2tCYXNlVXRpbHMsXG5cdEhvb2tDYWxsYmFja3MsXG5cdEhvb2tTYWZlQWN0aW9uRm4sXG5cdFVzZUFjdGlvbkhvb2tSZXR1cm4sXG5cdFVzZU9wdGltaXN0aWNBY3Rpb25Ib29rUmV0dXJuLFxufSBmcm9tIFwiLi9ob29rcy50eXBlc1wiO1xuaW1wb3J0IHR5cGUgeyBTYWZlQWN0aW9uUmVzdWx0IH0gZnJvbSBcIi4vaW5kZXgudHlwZXNcIjtcblxuLy8gSE9PS1NcblxuLyoqXG4gKiBVc2UgdGhlIGFjdGlvbiBmcm9tIGEgQ2xpZW50IENvbXBvbmVudCB2aWEgaG9vay5cbiAqIEBwYXJhbSBzYWZlQWN0aW9uRm4gVGhlIGFjdGlvbiBmdW5jdGlvblxuICogQHBhcmFtIHV0aWxzIE9wdGlvbmFsIGJhc2UgdXRpbHMgYW5kIGNhbGxiYWNrc1xuICpcbiAqIHtAbGluayBodHRwczovL25leHQtc2FmZS1hY3Rpb24uZGV2L2RvY3MvZXhlY3V0ZS1hY3Rpb25zL2hvb2tzL3VzZWFjdGlvbiBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUFjdGlvbiA9IDxcblx0U2VydmVyRXJyb3IsXG5cdFMgZXh0ZW5kcyBTY2hlbWEgfCB1bmRlZmluZWQsXG5cdGNvbnN0IEJBUyBleHRlbmRzIHJlYWRvbmx5IFNjaGVtYVtdLFxuXHRDVkUsXG5cdENCQVZFLFxuXHREYXRhLFxuPihcblx0c2FmZUFjdGlvbkZuOiBIb29rU2FmZUFjdGlvbkZuPFNlcnZlckVycm9yLCBTLCBCQVMsIENWRSwgQ0JBVkUsIERhdGE+LFxuXHR1dGlscz86IEhvb2tCYXNlVXRpbHM8Uz4gJiBIb29rQ2FsbGJhY2tzPFNlcnZlckVycm9yLCBTLCBCQVMsIENWRSwgQ0JBVkUsIERhdGE+XG4pOiBVc2VBY3Rpb25Ib29rUmV0dXJuPFNlcnZlckVycm9yLCBTLCBCQVMsIENWRSwgQ0JBVkUsIERhdGE+ID0+IHtcblx0Y29uc3QgW2lzVHJhbnNpdGlvbmluZywgc3RhcnRUcmFuc2l0aW9uXSA9IFJlYWN0LnVzZVRyYW5zaXRpb24oKTtcblx0Y29uc3QgW3Jlc3VsdCwgc2V0UmVzdWx0XSA9IFJlYWN0LnVzZVN0YXRlPFNhZmVBY3Rpb25SZXN1bHQ8U2VydmVyRXJyb3IsIFMsIEJBUywgQ1ZFLCBDQkFWRSwgRGF0YT4+KHt9KTtcblx0Y29uc3QgW2NsaWVudElucHV0LCBzZXRDbGllbnRJbnB1dF0gPSBSZWFjdC51c2VTdGF0ZTxTIGV4dGVuZHMgU2NoZW1hID8gSW5mZXJJbjxTPiA6IHZvaWQ+KCk7XG5cdGNvbnN0IFtpc0V4ZWN1dGluZywgc2V0SXNFeGVjdXRpbmddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuXHRjb25zdCBbaXNJZGxlLCBzZXRJc0lkbGVdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSk7XG5cblx0Y29uc3Qgc3RhdHVzID0gZ2V0QWN0aW9uU3RhdHVzPFNlcnZlckVycm9yLCBTLCBCQVMsIENWRSwgQ0JBVkUsIERhdGE+KHsgaXNFeGVjdXRpbmcsIHJlc3VsdCwgaXNJZGxlIH0pO1xuXG5cdGNvbnN0IGV4ZWN1dGUgPSBSZWFjdC51c2VDYWxsYmFjayhcblx0XHQoaW5wdXQ6IFMgZXh0ZW5kcyBTY2hlbWEgPyBJbmZlckluPFM+IDogdm9pZCkgPT4ge1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHNldElzSWRsZShmYWxzZSk7XG5cdFx0XHRcdHNldENsaWVudElucHV0KGlucHV0KTtcblx0XHRcdFx0c2V0SXNFeGVjdXRpbmcodHJ1ZSk7XG5cdFx0XHR9LCAwKTtcblxuXHRcdFx0c3RhcnRUcmFuc2l0aW9uKCgpID0+IHtcblx0XHRcdFx0c2FmZUFjdGlvbkZuKGlucHV0IGFzIFMgZXh0ZW5kcyBTY2hlbWEgPyBJbmZlckluPFM+IDogdW5kZWZpbmVkKVxuXHRcdFx0XHRcdC50aGVuKChyZXMpID0+IHNldFJlc3VsdChyZXMgPz8ge30pKVxuXHRcdFx0XHRcdC5jYXRjaCgoZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5maW5hbGx5KCgpID0+IHtcblx0XHRcdFx0XHRcdHNldElzRXhlY3V0aW5nKGZhbHNlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0W3NhZmVBY3Rpb25Gbl1cblx0KTtcblxuXHRjb25zdCBleGVjdXRlQXN5bmMgPSBSZWFjdC51c2VDYWxsYmFjayhcblx0XHQoaW5wdXQ6IFMgZXh0ZW5kcyBTY2hlbWEgPyBJbmZlckluPFM+IDogdm9pZCkgPT4ge1xuXHRcdFx0Y29uc3QgZm4gPSBuZXcgUHJvbWlzZTxBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIHNhZmVBY3Rpb25Gbj4+PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdHNldElzSWRsZShmYWxzZSk7XG5cdFx0XHRcdFx0c2V0Q2xpZW50SW5wdXQoaW5wdXQpO1xuXHRcdFx0XHRcdHNldElzRXhlY3V0aW5nKHRydWUpO1xuXHRcdFx0XHR9LCAwKTtcblxuXHRcdFx0XHRzdGFydFRyYW5zaXRpb24oKCkgPT4ge1xuXHRcdFx0XHRcdHNhZmVBY3Rpb25GbihpbnB1dCBhcyBTIGV4dGVuZHMgU2NoZW1hID8gSW5mZXJJbjxTPiA6IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdC50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0XHRcdFx0c2V0UmVzdWx0KHJlcyA/PyB7fSk7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUocmVzKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5maW5hbGx5KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0c2V0SXNFeGVjdXRpbmcoZmFsc2UpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBmbjtcblx0XHR9LFxuXHRcdFtzYWZlQWN0aW9uRm5dXG5cdCk7XG5cblx0Y29uc3QgcmVzZXQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG5cdFx0c2V0SXNJZGxlKHRydWUpO1xuXHRcdHNldENsaWVudElucHV0KHVuZGVmaW5lZCk7XG5cdFx0c2V0UmVzdWx0KHt9KTtcblx0fSwgW10pO1xuXG5cdHVzZUV4ZWN1dGVPbk1vdW50KHtcblx0XHRleGVjdXRlT25Nb3VudDogdXRpbHM/LmV4ZWN1dGVPbk1vdW50LFxuXHRcdGV4ZWN1dGVGbjogZXhlY3V0ZSxcblx0fSk7XG5cblx0dXNlQWN0aW9uQ2FsbGJhY2tzKHtcblx0XHRyZXN1bHQ6IHJlc3VsdCA/PyB7fSxcblx0XHRpbnB1dDogY2xpZW50SW5wdXQgYXMgUyBleHRlbmRzIFNjaGVtYSA/IEluZmVySW48Uz4gOiB1bmRlZmluZWQsXG5cdFx0c3RhdHVzLFxuXHRcdGNiOiB7XG5cdFx0XHRvbkV4ZWN1dGU6IHV0aWxzPy5vbkV4ZWN1dGUsXG5cdFx0XHRvblN1Y2Nlc3M6IHV0aWxzPy5vblN1Y2Nlc3MsXG5cdFx0XHRvbkVycm9yOiB1dGlscz8ub25FcnJvcixcblx0XHRcdG9uU2V0dGxlZDogdXRpbHM/Lm9uU2V0dGxlZCxcblx0XHR9LFxuXHR9KTtcblxuXHRyZXR1cm4ge1xuXHRcdGV4ZWN1dGUsXG5cdFx0ZXhlY3V0ZUFzeW5jLFxuXHRcdGlucHV0OiBjbGllbnRJbnB1dCBhcyBTIGV4dGVuZHMgU2NoZW1hID8gSW5mZXJJbjxTPiA6IHVuZGVmaW5lZCxcblx0XHRyZXN1bHQsXG5cdFx0cmVzZXQsXG5cdFx0c3RhdHVzLFxuXHRcdC4uLmdldEFjdGlvblNob3J0aGFuZFN0YXR1c09iamVjdCh7IHN0YXR1cywgaXNUcmFuc2l0aW9uaW5nIH0pLFxuXHR9O1xufTtcblxuLyoqXG4gKiBVc2UgdGhlIGFjdGlvbiBmcm9tIGEgQ2xpZW50IENvbXBvbmVudCB2aWEgaG9vaywgd2l0aCBvcHRpbWlzdGljIGRhdGEgdXBkYXRlLlxuICogQHBhcmFtIHNhZmVBY3Rpb25GbiBUaGUgYWN0aW9uIGZ1bmN0aW9uXG4gKiBAcGFyYW0gdXRpbHMgUmVxdWlyZWQgYGN1cnJlbnREYXRhYCBhbmQgYHVwZGF0ZUZuYCBhbmQgb3B0aW9uYWwgYmFzZSB1dGlscyBhbmQgY2FsbGJhY2tzXG4gKlxuICoge0BsaW5rIGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9leGVjdXRlLWFjdGlvbnMvaG9va3MvdXNlb3B0aW1pc3RpY2FjdGlvbiBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cbiAqL1xuZXhwb3J0IGNvbnN0IHVzZU9wdGltaXN0aWNBY3Rpb24gPSA8XG5cdFNlcnZlckVycm9yLFxuXHRTIGV4dGVuZHMgU2NoZW1hIHwgdW5kZWZpbmVkLFxuXHRjb25zdCBCQVMgZXh0ZW5kcyByZWFkb25seSBTY2hlbWFbXSxcblx0Q1ZFLFxuXHRDQkFWRSxcblx0RGF0YSxcblx0U3RhdGUsXG4+KFxuXHRzYWZlQWN0aW9uRm46IEhvb2tTYWZlQWN0aW9uRm48U2VydmVyRXJyb3IsIFMsIEJBUywgQ1ZFLCBDQkFWRSwgRGF0YT4sXG5cdHV0aWxzOiB7XG5cdFx0Y3VycmVudFN0YXRlOiBTdGF0ZTtcblx0XHR1cGRhdGVGbjogKHN0YXRlOiBTdGF0ZSwgaW5wdXQ6IFMgZXh0ZW5kcyBTY2hlbWEgPyBJbmZlckluPFM+IDogdW5kZWZpbmVkKSA9PiBTdGF0ZTtcblx0fSAmIEhvb2tCYXNlVXRpbHM8Uz4gJlxuXHRcdEhvb2tDYWxsYmFja3M8U2VydmVyRXJyb3IsIFMsIEJBUywgQ1ZFLCBDQkFWRSwgRGF0YT5cbik6IFVzZU9wdGltaXN0aWNBY3Rpb25Ib29rUmV0dXJuPFNlcnZlckVycm9yLCBTLCBCQVMsIENWRSwgQ0JBVkUsIERhdGEsIFN0YXRlPiA9PiB7XG5cdGNvbnN0IFtpc1RyYW5zaXRpb25pbmcsIHN0YXJ0VHJhbnNpdGlvbl0gPSBSZWFjdC51c2VUcmFuc2l0aW9uKCk7XG5cdGNvbnN0IFtyZXN1bHQsIHNldFJlc3VsdF0gPSBSZWFjdC51c2VTdGF0ZTxTYWZlQWN0aW9uUmVzdWx0PFNlcnZlckVycm9yLCBTLCBCQVMsIENWRSwgQ0JBVkUsIERhdGE+Pih7fSk7XG5cdGNvbnN0IFtjbGllbnRJbnB1dCwgc2V0Q2xpZW50SW5wdXRdID0gUmVhY3QudXNlU3RhdGU8UyBleHRlbmRzIFNjaGVtYSA/IEluZmVySW48Uz4gOiB2b2lkPigpO1xuXHRjb25zdCBbaXNFeGVjdXRpbmcsIHNldElzRXhlY3V0aW5nXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcblx0Y29uc3QgW2lzSWRsZSwgc2V0SXNJZGxlXSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpO1xuXHRjb25zdCBbb3B0aW1pc3RpY1N0YXRlLCBzZXRPcHRpbWlzdGljVmFsdWVdID0gUmVhY3QudXNlT3B0aW1pc3RpYzxTdGF0ZSwgUyBleHRlbmRzIFNjaGVtYSA/IEluZmVySW48Uz4gOiB1bmRlZmluZWQ+KFxuXHRcdHV0aWxzLmN1cnJlbnRTdGF0ZSxcblx0XHR1dGlscy51cGRhdGVGblxuXHQpO1xuXG5cdGNvbnN0IHN0YXR1cyA9IGdldEFjdGlvblN0YXR1czxTZXJ2ZXJFcnJvciwgUywgQkFTLCBDVkUsIENCQVZFLCBEYXRhPih7IGlzRXhlY3V0aW5nLCByZXN1bHQsIGlzSWRsZSB9KTtcblxuXHRjb25zdCBleGVjdXRlID0gUmVhY3QudXNlQ2FsbGJhY2soXG5cdFx0KGlucHV0OiBTIGV4dGVuZHMgU2NoZW1hID8gSW5mZXJJbjxTPiA6IHZvaWQpID0+IHtcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRzZXRJc0lkbGUoZmFsc2UpO1xuXHRcdFx0XHRzZXRDbGllbnRJbnB1dChpbnB1dCk7XG5cdFx0XHRcdHNldElzRXhlY3V0aW5nKHRydWUpO1xuXHRcdFx0fSwgMCk7XG5cblx0XHRcdHN0YXJ0VHJhbnNpdGlvbigoKSA9PiB7XG5cdFx0XHRcdHNldE9wdGltaXN0aWNWYWx1ZShpbnB1dCBhcyBTIGV4dGVuZHMgU2NoZW1hID8gSW5mZXJJbjxTPiA6IHVuZGVmaW5lZCk7XG5cdFx0XHRcdHNhZmVBY3Rpb25GbihpbnB1dCBhcyBTIGV4dGVuZHMgU2NoZW1hID8gSW5mZXJJbjxTPiA6IHVuZGVmaW5lZClcblx0XHRcdFx0XHQudGhlbigocmVzKSA9PiBzZXRSZXN1bHQocmVzID8/IHt9KSlcblx0XHRcdFx0XHQuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuZmluYWxseSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRzZXRJc0V4ZWN1dGluZyhmYWxzZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdFtzYWZlQWN0aW9uRm4sIHNldE9wdGltaXN0aWNWYWx1ZV1cblx0KTtcblxuXHRjb25zdCBleGVjdXRlQXN5bmMgPSBSZWFjdC51c2VDYWxsYmFjayhcblx0XHQoaW5wdXQ6IFMgZXh0ZW5kcyBTY2hlbWEgPyBJbmZlckluPFM+IDogdm9pZCkgPT4ge1xuXHRcdFx0Y29uc3QgZm4gPSBuZXcgUHJvbWlzZTxBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIHNhZmVBY3Rpb25Gbj4+PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdHNldElzSWRsZShmYWxzZSk7XG5cdFx0XHRcdFx0c2V0Q2xpZW50SW5wdXQoaW5wdXQpO1xuXHRcdFx0XHRcdHNldElzRXhlY3V0aW5nKHRydWUpO1xuXHRcdFx0XHR9LCAwKTtcblxuXHRcdFx0XHRzdGFydFRyYW5zaXRpb24oKCkgPT4ge1xuXHRcdFx0XHRcdHNldE9wdGltaXN0aWNWYWx1ZShpbnB1dCBhcyBTIGV4dGVuZHMgU2NoZW1hID8gSW5mZXJJbjxTPiA6IHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0c2FmZUFjdGlvbkZuKGlucHV0IGFzIFMgZXh0ZW5kcyBTY2hlbWEgPyBJbmZlckluPFM+IDogdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0LnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdFx0XHRzZXRSZXN1bHQocmVzID8/IHt9KTtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShyZXMpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5jYXRjaCgoZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZWplY3QoZSk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LmZpbmFsbHkoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRzZXRJc0V4ZWN1dGluZyhmYWxzZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGZuO1xuXHRcdH0sXG5cdFx0W3NhZmVBY3Rpb25Gbiwgc2V0T3B0aW1pc3RpY1ZhbHVlXVxuXHQpO1xuXG5cdGNvbnN0IHJlc2V0ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuXHRcdHNldElzSWRsZSh0cnVlKTtcblx0XHRzZXRDbGllbnRJbnB1dCh1bmRlZmluZWQpO1xuXHRcdHNldFJlc3VsdCh7fSk7XG5cdH0sIFtdKTtcblxuXHR1c2VFeGVjdXRlT25Nb3VudCh7XG5cdFx0ZXhlY3V0ZU9uTW91bnQ6IHV0aWxzPy5leGVjdXRlT25Nb3VudCxcblx0XHRleGVjdXRlRm46IGV4ZWN1dGUsXG5cdH0pO1xuXG5cdHVzZUFjdGlvbkNhbGxiYWNrcyh7XG5cdFx0cmVzdWx0OiByZXN1bHQgPz8ge30sXG5cdFx0aW5wdXQ6IGNsaWVudElucHV0IGFzIFMgZXh0ZW5kcyBTY2hlbWEgPyBJbmZlckluPFM+IDogdW5kZWZpbmVkLFxuXHRcdHN0YXR1cyxcblx0XHRjYjoge1xuXHRcdFx0b25FeGVjdXRlOiB1dGlscy5vbkV4ZWN1dGUsXG5cdFx0XHRvblN1Y2Nlc3M6IHV0aWxzLm9uU3VjY2Vzcyxcblx0XHRcdG9uRXJyb3I6IHV0aWxzLm9uRXJyb3IsXG5cdFx0XHRvblNldHRsZWQ6IHV0aWxzLm9uU2V0dGxlZCxcblx0XHR9LFxuXHR9KTtcblxuXHRyZXR1cm4ge1xuXHRcdGV4ZWN1dGUsXG5cdFx0ZXhlY3V0ZUFzeW5jLFxuXHRcdGlucHV0OiBjbGllbnRJbnB1dCBhcyBTIGV4dGVuZHMgU2NoZW1hID8gSW5mZXJJbjxTPiA6IHVuZGVmaW5lZCxcblx0XHRyZXN1bHQsXG5cdFx0b3B0aW1pc3RpY1N0YXRlLFxuXHRcdHJlc2V0LFxuXHRcdHN0YXR1cyxcblx0XHQuLi5nZXRBY3Rpb25TaG9ydGhhbmRTdGF0dXNPYmplY3QoeyBzdGF0dXMsIGlzVHJhbnNpdGlvbmluZyB9KSxcblx0fTtcbn07XG5cbmV4cG9ydCB0eXBlICogZnJvbSBcIi4vaG9va3MudHlwZXNcIjtcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHt9IGZyb20gXCJyZWFjdC9leHBlcmltZW50YWxcIjtcbmltcG9ydCB0eXBlIHt9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB0eXBlIHsgSW5mZXJJbiwgU2NoZW1hIH0gZnJvbSBcIi4vYWRhcHRlcnMvdHlwZXNcIjtcbmltcG9ydCB0eXBlIHsgSG9va0FjdGlvblN0YXR1cywgSG9va0Jhc2VVdGlscywgSG9va0NhbGxiYWNrcywgSG9va1Nob3J0aGFuZFN0YXR1cyB9IGZyb20gXCIuL2hvb2tzLnR5cGVzXCI7XG5pbXBvcnQgdHlwZSB7IFNhZmVBY3Rpb25SZXN1bHQgfSBmcm9tIFwiLi9pbmRleC50eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgZ2V0QWN0aW9uU3RhdHVzID0gPFxuXHRTZXJ2ZXJFcnJvcixcblx0UyBleHRlbmRzIFNjaGVtYSB8IHVuZGVmaW5lZCxcblx0Y29uc3QgQkFTIGV4dGVuZHMgcmVhZG9ubHkgU2NoZW1hW10sXG5cdENWRSxcblx0Q0JBVkUsXG5cdERhdGEsXG4+KHtcblx0aXNJZGxlLFxuXHRpc0V4ZWN1dGluZyxcblx0cmVzdWx0LFxufToge1xuXHRpc0lkbGU6IGJvb2xlYW47XG5cdGlzRXhlY3V0aW5nOiBib29sZWFuO1xuXHRyZXN1bHQ6IFNhZmVBY3Rpb25SZXN1bHQ8U2VydmVyRXJyb3IsIFMsIEJBUywgQ1ZFLCBDQkFWRSwgRGF0YT47XG59KTogSG9va0FjdGlvblN0YXR1cyA9PiB7XG5cdGlmIChpc0lkbGUpIHtcblx0XHRyZXR1cm4gXCJpZGxlXCI7XG5cdH0gZWxzZSBpZiAoaXNFeGVjdXRpbmcpIHtcblx0XHRyZXR1cm4gXCJleGVjdXRpbmdcIjtcblx0fSBlbHNlIGlmIChcblx0XHR0eXBlb2YgcmVzdWx0LnZhbGlkYXRpb25FcnJvcnMgIT09IFwidW5kZWZpbmVkXCIgfHxcblx0XHR0eXBlb2YgcmVzdWx0LmJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyAhPT0gXCJ1bmRlZmluZWRcIiB8fFxuXHRcdHR5cGVvZiByZXN1bHQuc2VydmVyRXJyb3IgIT09IFwidW5kZWZpbmVkXCJcblx0KSB7XG5cdFx0cmV0dXJuIFwiaGFzRXJyb3JlZFwiO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBcImhhc1N1Y2NlZWRlZFwiO1xuXHR9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QWN0aW9uU2hvcnRoYW5kU3RhdHVzT2JqZWN0ID0gKHtcblx0c3RhdHVzLFxuXHRpc1RyYW5zaXRpb25pbmcsXG59OiB7XG5cdHN0YXR1czogSG9va0FjdGlvblN0YXR1cztcblx0aXNUcmFuc2l0aW9uaW5nOiBib29sZWFuO1xufSk6IEhvb2tTaG9ydGhhbmRTdGF0dXMgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlzSWRsZTogc3RhdHVzID09PSBcImlkbGVcIixcblx0XHRpc0V4ZWN1dGluZzogc3RhdHVzID09PSBcImV4ZWN1dGluZ1wiLFxuXHRcdGlzVHJhbnNpdGlvbmluZyxcblx0XHRpc1BlbmRpbmc6IHN0YXR1cyA9PT0gXCJleGVjdXRpbmdcIiB8fCBpc1RyYW5zaXRpb25pbmcsXG5cdFx0aGFzU3VjY2VlZGVkOiBzdGF0dXMgPT09IFwiaGFzU3VjY2VlZGVkXCIsXG5cdFx0aGFzRXJyb3JlZDogc3RhdHVzID09PSBcImhhc0Vycm9yZWRcIixcblx0fTtcbn07XG5cbmV4cG9ydCBjb25zdCB1c2VFeGVjdXRlT25Nb3VudCA9IDxTIGV4dGVuZHMgU2NoZW1hIHwgdW5kZWZpbmVkPihcblx0YXJnczogSG9va0Jhc2VVdGlsczxTPiAmIHtcblx0XHRleGVjdXRlRm46IChpbnB1dDogUyBleHRlbmRzIFNjaGVtYSA/IEluZmVySW48Uz4gOiB2b2lkKSA9PiB2b2lkO1xuXHR9XG4pID0+IHtcblx0Y29uc3QgbW91bnRlZCA9IFJlYWN0LnVzZVJlZihmYWxzZSk7XG5cblx0UmVhY3QudXNlRWZmZWN0KCgpID0+IHtcblx0XHRjb25zdCB0ID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRpZiAoYXJncy5leGVjdXRlT25Nb3VudCAmJiAhbW91bnRlZC5jdXJyZW50KSB7XG5cdFx0XHRcdGFyZ3MuZXhlY3V0ZUZuKGFyZ3MuZXhlY3V0ZU9uTW91bnQuaW5wdXQgYXMgUyBleHRlbmRzIFNjaGVtYSA/IEluZmVySW48Uz4gOiB2b2lkKTtcblx0XHRcdFx0bW91bnRlZC5jdXJyZW50ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9LCBhcmdzLmV4ZWN1dGVPbk1vdW50Py5kZWxheU1zID8/IDApO1xuXG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdGNsZWFyVGltZW91dCh0KTtcblx0XHR9O1xuXHR9LCBbYXJnc10pO1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZUFjdGlvbkNhbGxiYWNrcyA9IDxcblx0U2VydmVyRXJyb3IsXG5cdFMgZXh0ZW5kcyBTY2hlbWEgfCB1bmRlZmluZWQsXG5cdGNvbnN0IEJBUyBleHRlbmRzIHJlYWRvbmx5IFNjaGVtYVtdLFxuXHRDVkUsXG5cdENCQVZFLFxuXHREYXRhLFxuPih7XG5cdHJlc3VsdCxcblx0aW5wdXQsXG5cdHN0YXR1cyxcblx0Y2IsXG59OiB7XG5cdHJlc3VsdDogU2FmZUFjdGlvblJlc3VsdDxTZXJ2ZXJFcnJvciwgUywgQkFTLCBDVkUsIENCQVZFLCBEYXRhPjtcblx0aW5wdXQ6IFMgZXh0ZW5kcyBTY2hlbWEgPyBJbmZlckluPFM+IDogdW5kZWZpbmVkO1xuXHRzdGF0dXM6IEhvb2tBY3Rpb25TdGF0dXM7XG5cdGNiPzogSG9va0NhbGxiYWNrczxTZXJ2ZXJFcnJvciwgUywgQkFTLCBDVkUsIENCQVZFLCBEYXRhPjtcbn0pID0+IHtcblx0Y29uc3Qgb25FeGVjdXRlUmVmID0gUmVhY3QudXNlUmVmKGNiPy5vbkV4ZWN1dGUpO1xuXHRjb25zdCBvblN1Y2Nlc3NSZWYgPSBSZWFjdC51c2VSZWYoY2I/Lm9uU3VjY2Vzcyk7XG5cdGNvbnN0IG9uRXJyb3JSZWYgPSBSZWFjdC51c2VSZWYoY2I/Lm9uRXJyb3IpO1xuXHRjb25zdCBvblNldHRsZWRSZWYgPSBSZWFjdC51c2VSZWYoY2I/Lm9uU2V0dGxlZCk7XG5cblx0Ly8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgd2hlbiB0aGUgYWN0aW9uIHN0YXR1cyBjaGFuZ2VzLlxuXHRSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuXHRcdGNvbnN0IG9uRXhlY3V0ZSA9IG9uRXhlY3V0ZVJlZi5jdXJyZW50O1xuXHRcdGNvbnN0IG9uU3VjY2VzcyA9IG9uU3VjY2Vzc1JlZi5jdXJyZW50O1xuXHRcdGNvbnN0IG9uRXJyb3IgPSBvbkVycm9yUmVmLmN1cnJlbnQ7XG5cdFx0Y29uc3Qgb25TZXR0bGVkID0gb25TZXR0bGVkUmVmLmN1cnJlbnQ7XG5cblx0XHRjb25zdCBleGVjdXRlQ2FsbGJhY2tzID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0c3dpdGNoIChzdGF0dXMpIHtcblx0XHRcdFx0Y2FzZSBcImV4ZWN1dGluZ1wiOlxuXHRcdFx0XHRcdGF3YWl0IFByb21pc2UucmVzb2x2ZShvbkV4ZWN1dGU/Lih7IGlucHV0IH0pKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImhhc1N1Y2NlZWRlZFwiOlxuXHRcdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKFtcblx0XHRcdFx0XHRcdFByb21pc2UucmVzb2x2ZShvblN1Y2Nlc3M/Lih7IGRhdGE6IHJlc3VsdD8uZGF0YSwgaW5wdXQgfSkpLFxuXHRcdFx0XHRcdFx0UHJvbWlzZS5yZXNvbHZlKG9uU2V0dGxlZD8uKHsgcmVzdWx0LCBpbnB1dCB9KSksXG5cdFx0XHRcdFx0XSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJoYXNFcnJvcmVkXCI6XG5cdFx0XHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwoW1xuXHRcdFx0XHRcdFx0UHJvbWlzZS5yZXNvbHZlKG9uRXJyb3I/Lih7IGVycm9yOiByZXN1bHQsIGlucHV0IH0pKSxcblx0XHRcdFx0XHRcdFByb21pc2UucmVzb2x2ZShvblNldHRsZWQ/Lih7IHJlc3VsdCwgaW5wdXQgfSkpLFxuXHRcdFx0XHRcdF0pO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRleGVjdXRlQ2FsbGJhY2tzKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cdH0sIFtzdGF0dXMsIHJlc3VsdCwgaW5wdXRdKTtcbn07XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJnZXRBY3Rpb25TdGF0dXMiLCJpc0lkbGUiLCJpc0V4ZWN1dGluZyIsInJlc3VsdCIsInZhbGlkYXRpb25FcnJvcnMiLCJiaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnMiLCJzZXJ2ZXJFcnJvciIsImdldEFjdGlvblNob3J0aGFuZFN0YXR1c09iamVjdCIsInN0YXR1cyIsImlzVHJhbnNpdGlvbmluZyIsImlzUGVuZGluZyIsImhhc1N1Y2NlZWRlZCIsImhhc0Vycm9yZWQiLCJ1c2VFeGVjdXRlT25Nb3VudCIsImFyZ3MiLCJtb3VudGVkIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidCIsInNldFRpbWVvdXQiLCJleGVjdXRlT25Nb3VudCIsImN1cnJlbnQiLCJleGVjdXRlRm4iLCJpbnB1dCIsImRlbGF5TXMiLCJjbGVhclRpbWVvdXQiLCJ1c2VBY3Rpb25DYWxsYmFja3MiLCJjYiIsIm9uRXhlY3V0ZVJlZiIsIm9uRXhlY3V0ZSIsIm9uU3VjY2Vzc1JlZiIsIm9uU3VjY2VzcyIsIm9uRXJyb3JSZWYiLCJvbkVycm9yIiwib25TZXR0bGVkUmVmIiwib25TZXR0bGVkIiwiZXhlY3V0ZUNhbGxiYWNrcyIsIlByb21pc2UiLCJyZXNvbHZlIiwiYWxsIiwiZGF0YSIsImVycm9yIiwiY2F0Y2giLCJjb25zb2xlIiwidXNlQWN0aW9uIiwic2FmZUFjdGlvbkZuIiwidXRpbHMiLCJzdGFydFRyYW5zaXRpb24iLCJSZWFjdDIiLCJ1c2VUcmFuc2l0aW9uIiwic2V0UmVzdWx0IiwidXNlU3RhdGUiLCJjbGllbnRJbnB1dCIsInNldENsaWVudElucHV0Iiwic2V0SXNFeGVjdXRpbmciLCJzZXRJc0lkbGUiLCJ0aGVuIiwicmVzIiwiZSIsImZpbmFsbHkiLCJleGVjdXRlQXN5bmMiLCJ1c2VDYWxsYmFjayIsImZuIiwicmVqZWN0IiwicmVzZXQiLCJleGVjdXRlIiwidXNlT3B0aW1pc3RpY0FjdGlvbiIsIm9wdGltaXN0aWNTdGF0ZSIsInNldE9wdGltaXN0aWNWYWx1ZSIsInVzZU9wdGltaXN0aWMiLCJjdXJyZW50U3RhdGUiLCJ1cGRhdGVGbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-safe-action/dist/hooks.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/next-safe-action/dist/index.mjs":
/*!******************************************************!*\
  !*** ./node_modules/next-safe-action/dist/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionMetadataValidationError: () => (/* binding */ ActionMetadataValidationError),\n/* harmony export */   ActionOutputDataValidationError: () => (/* binding */ ActionOutputDataValidationError),\n/* harmony export */   ActionValidationError: () => (/* binding */ ActionValidationError),\n/* harmony export */   DEFAULT_SERVER_ERROR_MESSAGE: () => (/* binding */ DEFAULT_SERVER_ERROR_MESSAGE),\n/* harmony export */   createMiddleware: () => (/* binding */ createMiddleware),\n/* harmony export */   createSafeActionClient: () => (/* binding */ createSafeActionClient),\n/* harmony export */   flattenBindArgsValidationErrors: () => (/* binding */ flattenBindArgsValidationErrors),\n/* harmony export */   flattenValidationErrors: () => (/* binding */ flattenValidationErrors),\n/* harmony export */   formatBindArgsValidationErrors: () => (/* binding */ formatBindArgsValidationErrors),\n/* harmony export */   formatValidationErrors: () => (/* binding */ formatValidationErrors),\n/* harmony export */   returnValidationErrors: () => (/* binding */ returnValidationErrors)\n/* harmony export */ });\n/* harmony import */ var next_dist_client_components_not_found_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/client/components/not-found.js */ \"(action-browser)/./node_modules/next/dist/client/components/not-found.js\");\n/* harmony import */ var next_dist_client_components_redirect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/client/components/redirect.js */ \"(action-browser)/./node_modules/next/dist/client/components/redirect.js\");\n// src/adapters/zod.ts\nvar ZodAdapter = class {\n\tasync validate(schema, data) {\n\t\tconst result = await schema.safeParseAsync(data);\n\t\tif (result.success) {\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tdata: result.data,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tsuccess: false,\n\t\t\tissues: result.error.issues.map(({ message, path }) => ({ message, path })),\n\t\t};\n\t}\n};\nfunction zodAdapter() {\n\treturn new ZodAdapter();\n}\n\n// ../../node_modules/.pnpm/deepmerge-ts@7.1.0/node_modules/deepmerge-ts/dist/node/index.mjs\nvar actions = {\n\tdefaultMerge: Symbol(\"deepmerge-ts: default merge\"),\n\tskip: Symbol(\"deepmerge-ts: skip\"),\n};\nvar actionsInto = {\n\tdefaultMerge: actions.defaultMerge,\n};\nfunction defaultMetaDataUpdater(previousMeta, metaMeta) {\n\treturn metaMeta;\n}\nfunction defaultFilterValues(values, meta) {\n\treturn values.filter((value) => value !== void 0);\n}\nvar ObjectType;\n(function (ObjectType2) {\n\tObjectType2[(ObjectType2[\"NOT\"] = 0)] = \"NOT\";\n\tObjectType2[(ObjectType2[\"RECORD\"] = 1)] = \"RECORD\";\n\tObjectType2[(ObjectType2[\"ARRAY\"] = 2)] = \"ARRAY\";\n\tObjectType2[(ObjectType2[\"SET\"] = 3)] = \"SET\";\n\tObjectType2[(ObjectType2[\"MAP\"] = 4)] = \"MAP\";\n\tObjectType2[(ObjectType2[\"OTHER\"] = 5)] = \"OTHER\";\n})(ObjectType || (ObjectType = {}));\nfunction getObjectType(object) {\n\tif (typeof object !== \"object\" || object === null) {\n\t\treturn 0;\n\t}\n\tif (Array.isArray(object)) {\n\t\treturn 2;\n\t}\n\tif (isRecord(object)) {\n\t\treturn 1;\n\t}\n\tif (object instanceof Set) {\n\t\treturn 3;\n\t}\n\tif (object instanceof Map) {\n\t\treturn 4;\n\t}\n\treturn 5;\n}\nfunction getKeys(objects) {\n\tconst keys = /* @__PURE__ */ new Set();\n\tfor (const object of objects) {\n\t\tfor (const key of [...Object.keys(object), ...Object.getOwnPropertySymbols(object)]) {\n\t\t\tkeys.add(key);\n\t\t}\n\t}\n\treturn keys;\n}\nfunction objectHasProperty(object, property) {\n\treturn typeof object === \"object\" && Object.prototype.propertyIsEnumerable.call(object, property);\n}\nfunction getIterableOfIterables(iterables) {\n\treturn {\n\t\t*[Symbol.iterator]() {\n\t\t\tfor (const iterable of iterables) {\n\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\tyield value;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n}\nvar validRecordToStringValues = /* @__PURE__ */ new Set([\"[object Object]\", \"[object Module]\"]);\nfunction isRecord(value) {\n\tif (!validRecordToStringValues.has(Object.prototype.toString.call(value))) {\n\t\treturn false;\n\t}\n\tconst { constructor } = value;\n\tif (constructor === void 0) {\n\t\treturn true;\n\t}\n\tconst prototype = constructor.prototype;\n\tif (\n\t\tprototype === null ||\n\t\ttypeof prototype !== \"object\" ||\n\t\t!validRecordToStringValues.has(Object.prototype.toString.call(prototype))\n\t) {\n\t\treturn false;\n\t}\n\tif (!prototype.hasOwnProperty(\"isPrototypeOf\")) {\n\t\treturn false;\n\t}\n\treturn true;\n}\nfunction mergeRecords$1(values, utils, meta) {\n\tconst result = {};\n\tfor (const key of getKeys(values)) {\n\t\tconst propValues = [];\n\t\tfor (const value of values) {\n\t\t\tif (objectHasProperty(value, key)) {\n\t\t\t\tpropValues.push(value[key]);\n\t\t\t}\n\t\t}\n\t\tif (propValues.length === 0) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst updatedMeta = utils.metaDataUpdater(meta, {\n\t\t\tkey,\n\t\t\tparents: values,\n\t\t});\n\t\tconst propertyResult = mergeUnknowns(propValues, utils, updatedMeta);\n\t\tif (propertyResult === actions.skip) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (key === \"__proto__\") {\n\t\t\tObject.defineProperty(result, key, {\n\t\t\t\tvalue: propertyResult,\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: true,\n\t\t\t});\n\t\t} else {\n\t\t\tresult[key] = propertyResult;\n\t\t}\n\t}\n\treturn result;\n}\nfunction mergeArrays$1(values) {\n\treturn values.flat();\n}\nfunction mergeSets$1(values) {\n\treturn new Set(getIterableOfIterables(values));\n}\nfunction mergeMaps$1(values) {\n\treturn new Map(getIterableOfIterables(values));\n}\nfunction mergeOthers$1(values) {\n\treturn values.at(-1);\n}\nvar mergeFunctions = {\n\tmergeRecords: mergeRecords$1,\n\tmergeArrays: mergeArrays$1,\n\tmergeSets: mergeSets$1,\n\tmergeMaps: mergeMaps$1,\n\tmergeOthers: mergeOthers$1,\n};\nfunction deepmerge(...objects) {\n\treturn deepmergeCustom({})(...objects);\n}\nfunction deepmergeCustom(options, rootMetaData) {\n\tconst utils = getUtils(options, customizedDeepmerge);\n\tfunction customizedDeepmerge(...objects) {\n\t\treturn mergeUnknowns(objects, utils, rootMetaData);\n\t}\n\treturn customizedDeepmerge;\n}\nfunction getUtils(options, customizedDeepmerge) {\n\treturn {\n\t\tdefaultMergeFunctions: mergeFunctions,\n\t\tmergeFunctions: {\n\t\t\t...mergeFunctions,\n\t\t\t...Object.fromEntries(\n\t\t\t\tObject.entries(options)\n\t\t\t\t\t.filter(([key, option]) => Object.hasOwn(mergeFunctions, key))\n\t\t\t\t\t.map(([key, option]) => (option === false ? [key, mergeFunctions.mergeOthers] : [key, option]))\n\t\t\t),\n\t\t},\n\t\tmetaDataUpdater: options.metaDataUpdater ?? defaultMetaDataUpdater,\n\t\tdeepmerge: customizedDeepmerge,\n\t\tuseImplicitDefaultMerging: options.enableImplicitDefaultMerging ?? false,\n\t\tfilterValues: options.filterValues === false ? void 0 : options.filterValues ?? defaultFilterValues,\n\t\tactions,\n\t};\n}\nfunction mergeUnknowns(values, utils, meta) {\n\tconst filteredValues = utils.filterValues?.(values, meta) ?? values;\n\tif (filteredValues.length === 0) {\n\t\treturn void 0;\n\t}\n\tif (filteredValues.length === 1) {\n\t\treturn mergeOthers(filteredValues, utils, meta);\n\t}\n\tconst type = getObjectType(filteredValues[0]);\n\tif (type !== 0 && type !== 5) {\n\t\tfor (let m_index = 1; m_index < filteredValues.length; m_index++) {\n\t\t\tif (getObjectType(filteredValues[m_index]) === type) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\treturn mergeOthers(filteredValues, utils, meta);\n\t\t}\n\t}\n\tswitch (type) {\n\t\tcase 1: {\n\t\t\treturn mergeRecords(filteredValues, utils, meta);\n\t\t}\n\t\tcase 2: {\n\t\t\treturn mergeArrays(filteredValues, utils, meta);\n\t\t}\n\t\tcase 3: {\n\t\t\treturn mergeSets(filteredValues, utils, meta);\n\t\t}\n\t\tcase 4: {\n\t\t\treturn mergeMaps(filteredValues, utils, meta);\n\t\t}\n\t\tdefault: {\n\t\t\treturn mergeOthers(filteredValues, utils, meta);\n\t\t}\n\t}\n}\nfunction mergeRecords(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeRecords(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeRecords !== utils.defaultMergeFunctions.mergeRecords)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeRecords(values, utils, meta);\n\t}\n\treturn result;\n}\nfunction mergeArrays(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeArrays(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeArrays !== utils.defaultMergeFunctions.mergeArrays)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeArrays(values);\n\t}\n\treturn result;\n}\nfunction mergeSets(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeSets(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeSets !== utils.defaultMergeFunctions.mergeSets)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeSets(values);\n\t}\n\treturn result;\n}\nfunction mergeMaps(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeMaps(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeMaps !== utils.defaultMergeFunctions.mergeMaps)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeMaps(values);\n\t}\n\treturn result;\n}\nfunction mergeOthers(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeOthers(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeOthers !== utils.defaultMergeFunctions.mergeOthers)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeOthers(values);\n\t}\n\treturn result;\n}\n\n// src/action-builder.ts\n\n\n\n// src/utils.ts\nvar DEFAULT_SERVER_ERROR_MESSAGE = \"Something went wrong while executing the operation.\";\nvar isError = (error) => error instanceof Error;\nvar winningBoolean = (...args) => {\n\treturn args.reduce((acc, v) => (typeof v === \"boolean\" ? v : acc), false);\n};\n\n// src/validation-errors.ts\nvar buildValidationErrors = (issues) => {\n\tconst ve = {};\n\tfor (const issue of issues) {\n\t\tconst { path, message } = issue;\n\t\tif (!path || path.length === 0) {\n\t\t\tve._errors = ve._errors ? [...ve._errors, message] : [message];\n\t\t\tcontinue;\n\t\t}\n\t\tlet ref = ve;\n\t\tfor (let i = 0; i < path.length - 1; i++) {\n\t\t\tconst k = path[i];\n\t\t\tif (!ref[k]) {\n\t\t\t\tref[k] = {};\n\t\t\t}\n\t\t\tref = ref[k];\n\t\t}\n\t\tconst key = path[path.length - 1];\n\t\tref[key] = ref[key]?._errors\n\t\t\t? {\n\t\t\t\t\t...structuredClone(ref[key]),\n\t\t\t\t\t_errors: [...ref[key]._errors, message],\n\t\t\t\t}\n\t\t\t: { ...structuredClone(ref[key]), _errors: [message] };\n\t}\n\treturn ve;\n};\nvar ActionServerValidationError = class extends Error {\n\tvalidationErrors;\n\tconstructor(validationErrors) {\n\t\tsuper(\"Server Action server validation error(s) occurred\");\n\t\tthis.validationErrors = validationErrors;\n\t}\n};\nvar ActionValidationError = class extends Error {\n\tvalidationErrors;\n\tconstructor(validationErrors) {\n\t\tsuper(\"Server Action validation error(s) occurred\");\n\t\tthis.validationErrors = validationErrors;\n\t}\n};\nfunction returnValidationErrors(schema, validationErrors) {\n\tthrow new ActionServerValidationError(validationErrors);\n}\nfunction formatValidationErrors(validationErrors) {\n\treturn validationErrors;\n}\nfunction formatBindArgsValidationErrors(bindArgsValidationErrors) {\n\treturn bindArgsValidationErrors;\n}\nfunction flattenValidationErrors(validationErrors) {\n\tconst flattened = {\n\t\tformErrors: [],\n\t\tfieldErrors: {},\n\t};\n\tfor (const [key, value] of Object.entries(validationErrors ?? {})) {\n\t\tif (key === \"_errors\" && Array.isArray(value)) {\n\t\t\tflattened.formErrors = [...value];\n\t\t} else {\n\t\t\tif (\"_errors\" in value) {\n\t\t\t\tflattened.fieldErrors[key] = [...value._errors];\n\t\t\t}\n\t\t}\n\t}\n\treturn flattened;\n}\nfunction flattenBindArgsValidationErrors(bindArgsValidationErrors) {\n\treturn bindArgsValidationErrors.map((ve) => flattenValidationErrors(ve));\n}\nvar ActionMetadataValidationError = class extends Error {\n\tvalidationErrors;\n\tconstructor(validationErrors) {\n\t\tsuper(\"Invalid metadata input. Please be sure to pass metadata via `metadata` method before defining the action.\");\n\t\tthis.name = \"ActionMetadataError\";\n\t\tthis.validationErrors = validationErrors;\n\t}\n};\nvar ActionOutputDataValidationError = class extends Error {\n\tvalidationErrors;\n\tconstructor(validationErrors) {\n\t\tsuper(\n\t\t\t\"Invalid action data (output). Please be sure to return data following the shape of the schema passed to `dataSchema` method.\"\n\t\t);\n\t\tthis.name = \"ActionOutputDataError\";\n\t\tthis.validationErrors = validationErrors;\n\t}\n};\n\n// src/action-builder.ts\nfunction actionBuilder(args) {\n\tconst bindArgsSchemas = args.bindArgsSchemas ?? [];\n\tfunction buildAction({ withState }) {\n\t\treturn {\n\t\t\taction: (serverCodeFn, utils) => {\n\t\t\t\treturn async (...clientInputs) => {\n\t\t\t\t\tlet currentCtx = {};\n\t\t\t\t\tconst middlewareResult = { success: false };\n\t\t\t\t\tlet prevResult = void 0;\n\t\t\t\t\tconst parsedInputDatas = [];\n\t\t\t\t\tlet frameworkError = null;\n\t\t\t\t\tif (withState) {\n\t\t\t\t\t\tprevResult = clientInputs.splice(bindArgsSchemas.length, 1)[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (bindArgsSchemas.length + 1 > clientInputs.length) {\n\t\t\t\t\t\tclientInputs.push(void 0);\n\t\t\t\t\t}\n\t\t\t\t\tconst executeMiddlewareStack = async (idx = 0) => {\n\t\t\t\t\t\tif (frameworkError) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst middlewareFn = args.middlewareFns[idx];\n\t\t\t\t\t\tmiddlewareResult.ctx = currentCtx;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (idx === 0) {\n\t\t\t\t\t\t\t\tif (args.metadataSchema) {\n\t\t\t\t\t\t\t\t\tconst parsedMd = await args.validationAdapter.validate(args.metadataSchema, args.metadata);\n\t\t\t\t\t\t\t\t\tif (!parsedMd.success) {\n\t\t\t\t\t\t\t\t\t\tthrow new ActionMetadataValidationError(buildValidationErrors(parsedMd.issues));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (middlewareFn) {\n\t\t\t\t\t\t\t\tawait middlewareFn({\n\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t// pass raw client input\n\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\tnext: async (nextOpts) => {\n\t\t\t\t\t\t\t\t\t\tcurrentCtx = deepmerge(currentCtx, nextOpts?.ctx ?? {});\n\t\t\t\t\t\t\t\t\t\tawait executeMiddlewareStack(idx + 1);\n\t\t\t\t\t\t\t\t\t\treturn middlewareResult;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst parsedInputs = await Promise.all(\n\t\t\t\t\t\t\t\t\tclientInputs.map(async (input, i) => {\n\t\t\t\t\t\t\t\t\t\tif (i === clientInputs.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\tif (typeof args.inputSchemaFn === \"undefined\") {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: void 0,\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn args.validationAdapter.validate(await args.inputSchemaFn(), input);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn args.validationAdapter.validate(bindArgsSchemas[i], input);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tlet hasBindValidationErrors = false;\n\t\t\t\t\t\t\t\tconst bindArgsValidationErrors = Array(parsedInputs.length - 1).fill({});\n\t\t\t\t\t\t\t\tfor (let i = 0; i < parsedInputs.length; i++) {\n\t\t\t\t\t\t\t\t\tconst parsedInput = parsedInputs[i];\n\t\t\t\t\t\t\t\t\tif (parsedInput.success) {\n\t\t\t\t\t\t\t\t\t\tparsedInputDatas.push(parsedInput.data);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (i < parsedInputs.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\tbindArgsValidationErrors[i] = buildValidationErrors(parsedInput.issues);\n\t\t\t\t\t\t\t\t\t\t\thasBindValidationErrors = true;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tconst validationErrors = buildValidationErrors(parsedInput.issues);\n\t\t\t\t\t\t\t\t\t\t\tmiddlewareResult.validationErrors = await Promise.resolve(\n\t\t\t\t\t\t\t\t\t\t\t\targs.handleValidationErrorsShape(validationErrors, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (hasBindValidationErrors) {\n\t\t\t\t\t\t\t\t\tmiddlewareResult.bindArgsValidationErrors = await Promise.resolve(\n\t\t\t\t\t\t\t\t\t\targs.handleBindArgsValidationErrorsShape(bindArgsValidationErrors, {\n\t\t\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (middlewareResult.validationErrors || middlewareResult.bindArgsValidationErrors) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst scfArgs = [];\n\t\t\t\t\t\t\t\tscfArgs[0] = {\n\t\t\t\t\t\t\t\t\tparsedInput: parsedInputDatas.at(-1),\n\t\t\t\t\t\t\t\t\tbindArgsParsedInputs: parsedInputDatas.slice(0, -1),\n\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tif (withState) {\n\t\t\t\t\t\t\t\t\tscfArgs[1] = { prevResult: structuredClone(prevResult) };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst data = await serverCodeFn(...scfArgs);\n\t\t\t\t\t\t\t\tif (typeof args.outputSchema !== \"undefined\") {\n\t\t\t\t\t\t\t\t\tconst parsedData = await args.validationAdapter.validate(args.outputSchema, data);\n\t\t\t\t\t\t\t\t\tif (!parsedData.success) {\n\t\t\t\t\t\t\t\t\t\tthrow new ActionOutputDataValidationError(buildValidationErrors(parsedData.issues));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmiddlewareResult.success = true;\n\t\t\t\t\t\t\t\tmiddlewareResult.data = data;\n\t\t\t\t\t\t\t\tmiddlewareResult.parsedInput = parsedInputDatas.at(-1);\n\t\t\t\t\t\t\t\tmiddlewareResult.bindArgsParsedInputs = parsedInputDatas.slice(0, -1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tif ((0,next_dist_client_components_redirect_js__WEBPACK_IMPORTED_MODULE_1__.isRedirectError)(e) || (0,next_dist_client_components_not_found_js__WEBPACK_IMPORTED_MODULE_0__.isNotFoundError)(e)) {\n\t\t\t\t\t\t\t\tmiddlewareResult.success = true;\n\t\t\t\t\t\t\t\tframeworkError = e;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (e instanceof ActionServerValidationError) {\n\t\t\t\t\t\t\t\tconst ve = e.validationErrors;\n\t\t\t\t\t\t\t\tmiddlewareResult.validationErrors = await Promise.resolve(\n\t\t\t\t\t\t\t\t\targs.handleValidationErrorsShape(ve, {\n\t\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst error = isError(e) ? e : new Error(DEFAULT_SERVER_ERROR_MESSAGE);\n\t\t\t\t\t\t\t\tconst returnedError = await Promise.resolve(\n\t\t\t\t\t\t\t\t\targs.handleServerError(error, {\n\t\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t\t// pass raw client input\n\t\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmiddlewareResult.serverError = returnedError;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tawait executeMiddlewareStack();\n\t\t\t\t\tconst callbacksToExecute = [];\n\t\t\t\t\tif (frameworkError) {\n\t\t\t\t\t\tcallbacksToExecute.push(\n\t\t\t\t\t\t\tutils?.onSuccess?.({\n\t\t\t\t\t\t\t\tdata: void 0,\n\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\tparsedInput: parsedInputDatas.at(-1),\n\t\t\t\t\t\t\t\tbindArgsParsedInputs: parsedInputDatas.slice(0, -1),\n\t\t\t\t\t\t\t\thasRedirected: (0,next_dist_client_components_redirect_js__WEBPACK_IMPORTED_MODULE_1__.isRedirectError)(frameworkError),\n\t\t\t\t\t\t\t\thasNotFound: (0,next_dist_client_components_not_found_js__WEBPACK_IMPORTED_MODULE_0__.isNotFoundError)(frameworkError),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcallbacksToExecute.push(\n\t\t\t\t\t\t\tutils?.onSettled?.({\n\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\tresult: {},\n\t\t\t\t\t\t\t\thasRedirected: (0,next_dist_client_components_redirect_js__WEBPACK_IMPORTED_MODULE_1__.isRedirectError)(frameworkError),\n\t\t\t\t\t\t\t\thasNotFound: (0,next_dist_client_components_not_found_js__WEBPACK_IMPORTED_MODULE_0__.isNotFoundError)(frameworkError),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tawait Promise.all(callbacksToExecute);\n\t\t\t\t\t\tthrow frameworkError;\n\t\t\t\t\t}\n\t\t\t\t\tconst actionResult = {};\n\t\t\t\t\tif (typeof middlewareResult.validationErrors !== \"undefined\") {\n\t\t\t\t\t\tif (winningBoolean(args.throwValidationErrors, utils?.throwValidationErrors)) {\n\t\t\t\t\t\t\tthrow new ActionValidationError(middlewareResult.validationErrors);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactionResult.validationErrors = middlewareResult.validationErrors;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof middlewareResult.bindArgsValidationErrors !== \"undefined\") {\n\t\t\t\t\t\tactionResult.bindArgsValidationErrors = middlewareResult.bindArgsValidationErrors;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof middlewareResult.serverError !== \"undefined\") {\n\t\t\t\t\t\tif (utils?.throwServerError) {\n\t\t\t\t\t\t\tthrow middlewareResult.serverError;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactionResult.serverError = middlewareResult.serverError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (middlewareResult.success) {\n\t\t\t\t\t\tif (typeof middlewareResult.data !== \"undefined\") {\n\t\t\t\t\t\t\tactionResult.data = middlewareResult.data;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallbacksToExecute.push(\n\t\t\t\t\t\t\tutils?.onSuccess?.({\n\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\tdata: actionResult.data,\n\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\tparsedInput: parsedInputDatas.at(-1),\n\t\t\t\t\t\t\t\tbindArgsParsedInputs: parsedInputDatas.slice(0, -1),\n\t\t\t\t\t\t\t\thasRedirected: false,\n\t\t\t\t\t\t\t\thasNotFound: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallbacksToExecute.push(\n\t\t\t\t\t\t\tutils?.onError?.({\n\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\terror: actionResult,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcallbacksToExecute.push(\n\t\t\t\t\t\tutils?.onSettled?.({\n\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\tresult: actionResult,\n\t\t\t\t\t\t\thasRedirected: false,\n\t\t\t\t\t\t\thasNotFound: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tawait Promise.all(callbacksToExecute);\n\t\t\t\t\treturn actionResult;\n\t\t\t\t};\n\t\t\t},\n\t\t};\n\t}\n\treturn {\n\t\t/**\n\t\t * Define the action.\n\t\t * @param serverCodeFn Code that will be executed on the **server side**\n\t\t *\n\t\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#action--stateaction See docs for more information}\n\t\t */\n\t\taction: buildAction({ withState: false }).action,\n\t\t/**\n\t\t * Define the stateful action. To be used with the [`useStateAction`](https://next-safe-action.dev/docs/execute-actions/hooks/usestateaction) hook.\n\t\t * @param serverCodeFn Code that will be executed on the **server side**\n\t\t *\n\t\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#action--stateaction See docs for more information}\n\t\t */\n\t\tstateAction: buildAction({ withState: true }).action,\n\t};\n}\n\n// src/safe-action-client.ts\nvar SafeActionClient = class _SafeActionClient {\n\t#handleServerError;\n\t#middlewareFns;\n\t#metadataSchema;\n\t#metadata;\n\t#inputSchemaFn;\n\t#outputSchema;\n\t#ctxType;\n\t#bindArgsSchemas;\n\t#validationAdapter;\n\t#handleValidationErrorsShape;\n\t#handleBindArgsValidationErrorsShape;\n\t#defaultValidationErrorsShape;\n\t#throwValidationErrors;\n\tconstructor(opts) {\n\t\tthis.#middlewareFns = opts.middlewareFns;\n\t\tthis.#handleServerError = opts.handleServerError;\n\t\tthis.#metadataSchema = opts.metadataSchema;\n\t\tthis.#metadata = opts.metadata;\n\t\tthis.#inputSchemaFn = opts.inputSchemaFn ?? void 0;\n\t\tthis.#outputSchema = opts.outputSchema;\n\t\tthis.#bindArgsSchemas = opts.bindArgsSchemas ?? [];\n\t\tthis.#validationAdapter = opts.validationAdapter;\n\t\tthis.#ctxType = opts.ctxType;\n\t\tthis.#handleValidationErrorsShape = opts.handleValidationErrorsShape;\n\t\tthis.#handleBindArgsValidationErrorsShape = opts.handleBindArgsValidationErrorsShape;\n\t\tthis.#defaultValidationErrorsShape = opts.defaultValidationErrorsShape;\n\t\tthis.#throwValidationErrors = opts.throwValidationErrors;\n\t}\n\t/**\n\t * Use a middleware function.\n\t * @param middlewareFn Middleware function\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#use See docs for more information}\n\t */\n\tuse(middlewareFn) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: [...this.#middlewareFns, middlewareFn],\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define metadata for the action.\n\t * @param data Metadata with the same type as the return value of the [`defineMetadataSchema`](https://next-safe-action.dev/docs/define-actions/create-the-client#definemetadataschema) optional initialization function\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#metadata See docs for more information}\n\t */\n\tmetadata(data) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: data,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define the input validation schema for the action.\n\t * @param inputSchema Input validation schema\n\t * @param utils Optional utils object\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/create-the-client#inputschema See docs for more information}\n\t */\n\tschema(inputSchema, utils) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\t// @ts-expect-error\n\t\t\tinputSchemaFn:\n\t\t\t\tinputSchema[Symbol.toStringTag] === \"AsyncFunction\"\n\t\t\t\t\t? async () => {\n\t\t\t\t\t\t\tconst prevSchema = await this.#inputSchemaFn?.();\n\t\t\t\t\t\t\treturn inputSchema(prevSchema);\n\t\t\t\t\t\t}\n\t\t\t\t\t: async () => inputSchema,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: utils?.handleValidationErrorsShape ?? this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define the bind args input validation schema for the action.\n\t * @param bindArgsSchemas Bind args input validation schemas\n\t * @param utils Optional utils object\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#bindargsschemas See docs for more information}\n\t */\n\tbindArgsSchemas(bindArgsSchemas, utils) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape:\n\t\t\t\tutils?.handleBindArgsValidationErrorsShape ?? this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define the output data validation schema for the action.\n\t * @param schema Output data validation schema\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/create-the-client#outputschema See docs for more information}\n\t */\n\toutputSchema(dataSchema) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: dataSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define the action.\n\t * @param serverCodeFn Code that will be executed on the **server side**\n\t * @param [cb] Optional callbacks that will be called after action execution, on the server.\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#action--stateaction See docs for more information}\n\t */\n\taction(serverCodeFn, utils) {\n\t\treturn actionBuilder({\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\tctxType: this.#ctxType,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t}).action(serverCodeFn, utils);\n\t}\n\t/**\n\t * Define the stateful action.\n\t * To be used with the [`useStateAction`](https://next-safe-action.dev/docs/execute-actions/hooks/usestateaction) hook.\n\t * @param serverCodeFn Code that will be executed on the **server side**\n\t * @param [cb] Optional callbacks that will be called after action execution, on the server.\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#action--stateaction See docs for more information}\n\t */\n\tstateAction(serverCodeFn, utils) {\n\t\treturn actionBuilder({\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\tctxType: this.#ctxType,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t}).stateAction(serverCodeFn, utils);\n\t}\n};\n\n// src/middleware.ts\nvar createMiddleware = () => {\n\treturn {\n\t\tdefine: (middlewareFn) => middlewareFn,\n\t};\n};\n\n// src/index.ts\nvar createSafeActionClient = (createOpts) => {\n\tconst handleServerError =\n\t\tcreateOpts?.handleServerError ||\n\t\t((e) => {\n\t\t\tconsole.error(\"Action error:\", e.message);\n\t\t\treturn DEFAULT_SERVER_ERROR_MESSAGE;\n\t\t});\n\treturn new SafeActionClient({\n\t\tmiddlewareFns: [async ({ next }) => next({ ctx: {} })],\n\t\thandleServerError,\n\t\tinputSchemaFn: void 0,\n\t\tbindArgsSchemas: [],\n\t\toutputSchema: void 0,\n\t\tvalidationAdapter: createOpts?.validationAdapter ?? zodAdapter(),\n\t\t// use zod adapter by default\n\t\tctxType: {},\n\t\tmetadataSchema: createOpts?.defineMetadataSchema?.() ?? void 0,\n\t\tmetadata: void 0,\n\t\tdefaultValidationErrorsShape: createOpts?.defaultValidationErrorsShape ?? \"formatted\",\n\t\tthrowValidationErrors: Boolean(createOpts?.throwValidationErrors),\n\t\thandleValidationErrorsShape:\n\t\t\tcreateOpts?.defaultValidationErrorsShape === \"flattened\" ? flattenValidationErrors : formatValidationErrors,\n\t\thandleBindArgsValidationErrorsShape:\n\t\t\tcreateOpts?.defaultValidationErrorsShape === \"flattened\"\n\t\t\t\t? flattenBindArgsValidationErrors\n\t\t\t\t: formatBindArgsValidationErrors,\n\t});\n};\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0LXNhZmUtYWN0aW9uL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZUFBZSxRQUFRLGVBQWU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsY0FBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUNBQWlDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMyRTtBQUNEOztBQUUxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFCQUFxQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwyQkFBMkIsTUFBTSxZQUFZLFNBQVM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBYUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NoYWRjbi1wb3J0Zm9saW8vLi9ub2RlX21vZHVsZXMvbmV4dC1zYWZlLWFjdGlvbi9kaXN0L2luZGV4Lm1qcz8xMjk1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hZGFwdGVycy96b2QudHNcbnZhciBab2RBZGFwdGVyID0gY2xhc3Mge1xuXHRhc3luYyB2YWxpZGF0ZShzY2hlbWEsIGRhdGEpIHtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBzY2hlbWEuc2FmZVBhcnNlQXN5bmMoZGF0YSk7XG5cdFx0aWYgKHJlc3VsdC5zdWNjZXNzKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0XHRkYXRhOiByZXN1bHQuZGF0YSxcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdGlzc3VlczogcmVzdWx0LmVycm9yLmlzc3Vlcy5tYXAoKHsgbWVzc2FnZSwgcGF0aCB9KSA9PiAoeyBtZXNzYWdlLCBwYXRoIH0pKSxcblx0XHR9O1xuXHR9XG59O1xuZnVuY3Rpb24gem9kQWRhcHRlcigpIHtcblx0cmV0dXJuIG5ldyBab2RBZGFwdGVyKCk7XG59XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9kZWVwbWVyZ2UtdHNANy4xLjAvbm9kZV9tb2R1bGVzL2RlZXBtZXJnZS10cy9kaXN0L25vZGUvaW5kZXgubWpzXG52YXIgYWN0aW9ucyA9IHtcblx0ZGVmYXVsdE1lcmdlOiBTeW1ib2woXCJkZWVwbWVyZ2UtdHM6IGRlZmF1bHQgbWVyZ2VcIiksXG5cdHNraXA6IFN5bWJvbChcImRlZXBtZXJnZS10czogc2tpcFwiKSxcbn07XG52YXIgYWN0aW9uc0ludG8gPSB7XG5cdGRlZmF1bHRNZXJnZTogYWN0aW9ucy5kZWZhdWx0TWVyZ2UsXG59O1xuZnVuY3Rpb24gZGVmYXVsdE1ldGFEYXRhVXBkYXRlcihwcmV2aW91c01ldGEsIG1ldGFNZXRhKSB7XG5cdHJldHVybiBtZXRhTWV0YTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRGaWx0ZXJWYWx1ZXModmFsdWVzLCBtZXRhKSB7XG5cdHJldHVybiB2YWx1ZXMuZmlsdGVyKCh2YWx1ZSkgPT4gdmFsdWUgIT09IHZvaWQgMCk7XG59XG52YXIgT2JqZWN0VHlwZTtcbihmdW5jdGlvbiAoT2JqZWN0VHlwZTIpIHtcblx0T2JqZWN0VHlwZTJbKE9iamVjdFR5cGUyW1wiTk9UXCJdID0gMCldID0gXCJOT1RcIjtcblx0T2JqZWN0VHlwZTJbKE9iamVjdFR5cGUyW1wiUkVDT1JEXCJdID0gMSldID0gXCJSRUNPUkRcIjtcblx0T2JqZWN0VHlwZTJbKE9iamVjdFR5cGUyW1wiQVJSQVlcIl0gPSAyKV0gPSBcIkFSUkFZXCI7XG5cdE9iamVjdFR5cGUyWyhPYmplY3RUeXBlMltcIlNFVFwiXSA9IDMpXSA9IFwiU0VUXCI7XG5cdE9iamVjdFR5cGUyWyhPYmplY3RUeXBlMltcIk1BUFwiXSA9IDQpXSA9IFwiTUFQXCI7XG5cdE9iamVjdFR5cGUyWyhPYmplY3RUeXBlMltcIk9USEVSXCJdID0gNSldID0gXCJPVEhFUlwiO1xufSkoT2JqZWN0VHlwZSB8fCAoT2JqZWN0VHlwZSA9IHt9KSk7XG5mdW5jdGlvbiBnZXRPYmplY3RUeXBlKG9iamVjdCkge1xuXHRpZiAodHlwZW9mIG9iamVjdCAhPT0gXCJvYmplY3RcIiB8fCBvYmplY3QgPT09IG51bGwpIHtcblx0XHRyZXR1cm4gMDtcblx0fVxuXHRpZiAoQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG5cdFx0cmV0dXJuIDI7XG5cdH1cblx0aWYgKGlzUmVjb3JkKG9iamVjdCkpIHtcblx0XHRyZXR1cm4gMTtcblx0fVxuXHRpZiAob2JqZWN0IGluc3RhbmNlb2YgU2V0KSB7XG5cdFx0cmV0dXJuIDM7XG5cdH1cblx0aWYgKG9iamVjdCBpbnN0YW5jZW9mIE1hcCkge1xuXHRcdHJldHVybiA0O1xuXHR9XG5cdHJldHVybiA1O1xufVxuZnVuY3Rpb24gZ2V0S2V5cyhvYmplY3RzKSB7XG5cdGNvbnN0IGtleXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRmb3IgKGNvbnN0IG9iamVjdCBvZiBvYmplY3RzKSB7XG5cdFx0Zm9yIChjb25zdCBrZXkgb2YgWy4uLk9iamVjdC5rZXlzKG9iamVjdCksIC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KV0pIHtcblx0XHRcdGtleXMuYWRkKGtleSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBrZXlzO1xufVxuZnVuY3Rpb24gb2JqZWN0SGFzUHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSkge1xuXHRyZXR1cm4gdHlwZW9mIG9iamVjdCA9PT0gXCJvYmplY3RcIiAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7XG59XG5mdW5jdGlvbiBnZXRJdGVyYWJsZU9mSXRlcmFibGVzKGl0ZXJhYmxlcykge1xuXHRyZXR1cm4ge1xuXHRcdCpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcblx0XHRcdGZvciAoY29uc3QgaXRlcmFibGUgb2YgaXRlcmFibGVzKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgdmFsdWUgb2YgaXRlcmFibGUpIHtcblx0XHRcdFx0XHR5aWVsZCB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdH07XG59XG52YXIgdmFsaWRSZWNvcmRUb1N0cmluZ1ZhbHVlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcIltvYmplY3QgT2JqZWN0XVwiLCBcIltvYmplY3QgTW9kdWxlXVwiXSk7XG5mdW5jdGlvbiBpc1JlY29yZCh2YWx1ZSkge1xuXHRpZiAoIXZhbGlkUmVjb3JkVG9TdHJpbmdWYWx1ZXMuaGFzKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGNvbnN0IHsgY29uc3RydWN0b3IgfSA9IHZhbHVlO1xuXHRpZiAoY29uc3RydWN0b3IgPT09IHZvaWQgMCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGNvbnN0IHByb3RvdHlwZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZTtcblx0aWYgKFxuXHRcdHByb3RvdHlwZSA9PT0gbnVsbCB8fFxuXHRcdHR5cGVvZiBwcm90b3R5cGUgIT09IFwib2JqZWN0XCIgfHxcblx0XHQhdmFsaWRSZWNvcmRUb1N0cmluZ1ZhbHVlcy5oYXMoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb3RvdHlwZSkpXG5cdCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoIXByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcImlzUHJvdG90eXBlT2ZcIikpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBtZXJnZVJlY29yZHMkMSh2YWx1ZXMsIHV0aWxzLCBtZXRhKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHt9O1xuXHRmb3IgKGNvbnN0IGtleSBvZiBnZXRLZXlzKHZhbHVlcykpIHtcblx0XHRjb25zdCBwcm9wVmFsdWVzID0gW107XG5cdFx0Zm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcblx0XHRcdGlmIChvYmplY3RIYXNQcm9wZXJ0eSh2YWx1ZSwga2V5KSkge1xuXHRcdFx0XHRwcm9wVmFsdWVzLnB1c2godmFsdWVba2V5XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChwcm9wVmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGNvbnN0IHVwZGF0ZWRNZXRhID0gdXRpbHMubWV0YURhdGFVcGRhdGVyKG1ldGEsIHtcblx0XHRcdGtleSxcblx0XHRcdHBhcmVudHM6IHZhbHVlcyxcblx0XHR9KTtcblx0XHRjb25zdCBwcm9wZXJ0eVJlc3VsdCA9IG1lcmdlVW5rbm93bnMocHJvcFZhbHVlcywgdXRpbHMsIHVwZGF0ZWRNZXRhKTtcblx0XHRpZiAocHJvcGVydHlSZXN1bHQgPT09IGFjdGlvbnMuc2tpcCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGlmIChrZXkgPT09IFwiX19wcm90b19fXCIpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXN1bHQsIGtleSwge1xuXHRcdFx0XHR2YWx1ZTogcHJvcGVydHlSZXN1bHQsXG5cdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0W2tleV0gPSBwcm9wZXJ0eVJlc3VsdDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1lcmdlQXJyYXlzJDEodmFsdWVzKSB7XG5cdHJldHVybiB2YWx1ZXMuZmxhdCgpO1xufVxuZnVuY3Rpb24gbWVyZ2VTZXRzJDEodmFsdWVzKSB7XG5cdHJldHVybiBuZXcgU2V0KGdldEl0ZXJhYmxlT2ZJdGVyYWJsZXModmFsdWVzKSk7XG59XG5mdW5jdGlvbiBtZXJnZU1hcHMkMSh2YWx1ZXMpIHtcblx0cmV0dXJuIG5ldyBNYXAoZ2V0SXRlcmFibGVPZkl0ZXJhYmxlcyh2YWx1ZXMpKTtcbn1cbmZ1bmN0aW9uIG1lcmdlT3RoZXJzJDEodmFsdWVzKSB7XG5cdHJldHVybiB2YWx1ZXMuYXQoLTEpO1xufVxudmFyIG1lcmdlRnVuY3Rpb25zID0ge1xuXHRtZXJnZVJlY29yZHM6IG1lcmdlUmVjb3JkcyQxLFxuXHRtZXJnZUFycmF5czogbWVyZ2VBcnJheXMkMSxcblx0bWVyZ2VTZXRzOiBtZXJnZVNldHMkMSxcblx0bWVyZ2VNYXBzOiBtZXJnZU1hcHMkMSxcblx0bWVyZ2VPdGhlcnM6IG1lcmdlT3RoZXJzJDEsXG59O1xuZnVuY3Rpb24gZGVlcG1lcmdlKC4uLm9iamVjdHMpIHtcblx0cmV0dXJuIGRlZXBtZXJnZUN1c3RvbSh7fSkoLi4ub2JqZWN0cyk7XG59XG5mdW5jdGlvbiBkZWVwbWVyZ2VDdXN0b20ob3B0aW9ucywgcm9vdE1ldGFEYXRhKSB7XG5cdGNvbnN0IHV0aWxzID0gZ2V0VXRpbHMob3B0aW9ucywgY3VzdG9taXplZERlZXBtZXJnZSk7XG5cdGZ1bmN0aW9uIGN1c3RvbWl6ZWREZWVwbWVyZ2UoLi4ub2JqZWN0cykge1xuXHRcdHJldHVybiBtZXJnZVVua25vd25zKG9iamVjdHMsIHV0aWxzLCByb290TWV0YURhdGEpO1xuXHR9XG5cdHJldHVybiBjdXN0b21pemVkRGVlcG1lcmdlO1xufVxuZnVuY3Rpb24gZ2V0VXRpbHMob3B0aW9ucywgY3VzdG9taXplZERlZXBtZXJnZSkge1xuXHRyZXR1cm4ge1xuXHRcdGRlZmF1bHRNZXJnZUZ1bmN0aW9uczogbWVyZ2VGdW5jdGlvbnMsXG5cdFx0bWVyZ2VGdW5jdGlvbnM6IHtcblx0XHRcdC4uLm1lcmdlRnVuY3Rpb25zLFxuXHRcdFx0Li4uT2JqZWN0LmZyb21FbnRyaWVzKFxuXHRcdFx0XHRPYmplY3QuZW50cmllcyhvcHRpb25zKVxuXHRcdFx0XHRcdC5maWx0ZXIoKFtrZXksIG9wdGlvbl0pID0+IE9iamVjdC5oYXNPd24obWVyZ2VGdW5jdGlvbnMsIGtleSkpXG5cdFx0XHRcdFx0Lm1hcCgoW2tleSwgb3B0aW9uXSkgPT4gKG9wdGlvbiA9PT0gZmFsc2UgPyBba2V5LCBtZXJnZUZ1bmN0aW9ucy5tZXJnZU90aGVyc10gOiBba2V5LCBvcHRpb25dKSlcblx0XHRcdCksXG5cdFx0fSxcblx0XHRtZXRhRGF0YVVwZGF0ZXI6IG9wdGlvbnMubWV0YURhdGFVcGRhdGVyID8/IGRlZmF1bHRNZXRhRGF0YVVwZGF0ZXIsXG5cdFx0ZGVlcG1lcmdlOiBjdXN0b21pemVkRGVlcG1lcmdlLFxuXHRcdHVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmc6IG9wdGlvbnMuZW5hYmxlSW1wbGljaXREZWZhdWx0TWVyZ2luZyA/PyBmYWxzZSxcblx0XHRmaWx0ZXJWYWx1ZXM6IG9wdGlvbnMuZmlsdGVyVmFsdWVzID09PSBmYWxzZSA/IHZvaWQgMCA6IG9wdGlvbnMuZmlsdGVyVmFsdWVzID8/IGRlZmF1bHRGaWx0ZXJWYWx1ZXMsXG5cdFx0YWN0aW9ucyxcblx0fTtcbn1cbmZ1bmN0aW9uIG1lcmdlVW5rbm93bnModmFsdWVzLCB1dGlscywgbWV0YSkge1xuXHRjb25zdCBmaWx0ZXJlZFZhbHVlcyA9IHV0aWxzLmZpbHRlclZhbHVlcz8uKHZhbHVlcywgbWV0YSkgPz8gdmFsdWVzO1xuXHRpZiAoZmlsdGVyZWRWYWx1ZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0cmV0dXJuIHZvaWQgMDtcblx0fVxuXHRpZiAoZmlsdGVyZWRWYWx1ZXMubGVuZ3RoID09PSAxKSB7XG5cdFx0cmV0dXJuIG1lcmdlT3RoZXJzKGZpbHRlcmVkVmFsdWVzLCB1dGlscywgbWV0YSk7XG5cdH1cblx0Y29uc3QgdHlwZSA9IGdldE9iamVjdFR5cGUoZmlsdGVyZWRWYWx1ZXNbMF0pO1xuXHRpZiAodHlwZSAhPT0gMCAmJiB0eXBlICE9PSA1KSB7XG5cdFx0Zm9yIChsZXQgbV9pbmRleCA9IDE7IG1faW5kZXggPCBmaWx0ZXJlZFZhbHVlcy5sZW5ndGg7IG1faW5kZXgrKykge1xuXHRcdFx0aWYgKGdldE9iamVjdFR5cGUoZmlsdGVyZWRWYWx1ZXNbbV9pbmRleF0pID09PSB0eXBlKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1lcmdlT3RoZXJzKGZpbHRlcmVkVmFsdWVzLCB1dGlscywgbWV0YSk7XG5cdFx0fVxuXHR9XG5cdHN3aXRjaCAodHlwZSkge1xuXHRcdGNhc2UgMToge1xuXHRcdFx0cmV0dXJuIG1lcmdlUmVjb3JkcyhmaWx0ZXJlZFZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRcdH1cblx0XHRjYXNlIDI6IHtcblx0XHRcdHJldHVybiBtZXJnZUFycmF5cyhmaWx0ZXJlZFZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRcdH1cblx0XHRjYXNlIDM6IHtcblx0XHRcdHJldHVybiBtZXJnZVNldHMoZmlsdGVyZWRWYWx1ZXMsIHV0aWxzLCBtZXRhKTtcblx0XHR9XG5cdFx0Y2FzZSA0OiB7XG5cdFx0XHRyZXR1cm4gbWVyZ2VNYXBzKGZpbHRlcmVkVmFsdWVzLCB1dGlscywgbWV0YSk7XG5cdFx0fVxuXHRcdGRlZmF1bHQ6IHtcblx0XHRcdHJldHVybiBtZXJnZU90aGVycyhmaWx0ZXJlZFZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRcdH1cblx0fVxufVxuZnVuY3Rpb24gbWVyZ2VSZWNvcmRzKHZhbHVlcywgdXRpbHMsIG1ldGEpIHtcblx0Y29uc3QgcmVzdWx0ID0gdXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VSZWNvcmRzKHZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRpZiAoXG5cdFx0cmVzdWx0ID09PSBhY3Rpb25zLmRlZmF1bHRNZXJnZSB8fFxuXHRcdCh1dGlscy51c2VJbXBsaWNpdERlZmF1bHRNZXJnaW5nICYmXG5cdFx0XHRyZXN1bHQgPT09IHZvaWQgMCAmJlxuXHRcdFx0dXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VSZWNvcmRzICE9PSB1dGlscy5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VSZWNvcmRzKVxuXHQpIHtcblx0XHRyZXR1cm4gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlUmVjb3Jkcyh2YWx1ZXMsIHV0aWxzLCBtZXRhKTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbWVyZ2VBcnJheXModmFsdWVzLCB1dGlscywgbWV0YSkge1xuXHRjb25zdCByZXN1bHQgPSB1dGlscy5tZXJnZUZ1bmN0aW9ucy5tZXJnZUFycmF5cyh2YWx1ZXMsIHV0aWxzLCBtZXRhKTtcblx0aWYgKFxuXHRcdHJlc3VsdCA9PT0gYWN0aW9ucy5kZWZhdWx0TWVyZ2UgfHxcblx0XHQodXRpbHMudXNlSW1wbGljaXREZWZhdWx0TWVyZ2luZyAmJlxuXHRcdFx0cmVzdWx0ID09PSB2b2lkIDAgJiZcblx0XHRcdHV0aWxzLm1lcmdlRnVuY3Rpb25zLm1lcmdlQXJyYXlzICE9PSB1dGlscy5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VBcnJheXMpXG5cdCkge1xuXHRcdHJldHVybiB1dGlscy5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VBcnJheXModmFsdWVzKTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbWVyZ2VTZXRzKHZhbHVlcywgdXRpbHMsIG1ldGEpIHtcblx0Y29uc3QgcmVzdWx0ID0gdXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VTZXRzKHZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRpZiAoXG5cdFx0cmVzdWx0ID09PSBhY3Rpb25zLmRlZmF1bHRNZXJnZSB8fFxuXHRcdCh1dGlscy51c2VJbXBsaWNpdERlZmF1bHRNZXJnaW5nICYmXG5cdFx0XHRyZXN1bHQgPT09IHZvaWQgMCAmJlxuXHRcdFx0dXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VTZXRzICE9PSB1dGlscy5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VTZXRzKVxuXHQpIHtcblx0XHRyZXR1cm4gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlU2V0cyh2YWx1ZXMpO1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBtZXJnZU1hcHModmFsdWVzLCB1dGlscywgbWV0YSkge1xuXHRjb25zdCByZXN1bHQgPSB1dGlscy5tZXJnZUZ1bmN0aW9ucy5tZXJnZU1hcHModmFsdWVzLCB1dGlscywgbWV0YSk7XG5cdGlmIChcblx0XHRyZXN1bHQgPT09IGFjdGlvbnMuZGVmYXVsdE1lcmdlIHx8XG5cdFx0KHV0aWxzLnVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmcgJiZcblx0XHRcdHJlc3VsdCA9PT0gdm9pZCAwICYmXG5cdFx0XHR1dGlscy5tZXJnZUZ1bmN0aW9ucy5tZXJnZU1hcHMgIT09IHV0aWxzLmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZU1hcHMpXG5cdCkge1xuXHRcdHJldHVybiB1dGlscy5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VNYXBzKHZhbHVlcyk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1lcmdlT3RoZXJzKHZhbHVlcywgdXRpbHMsIG1ldGEpIHtcblx0Y29uc3QgcmVzdWx0ID0gdXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VPdGhlcnModmFsdWVzLCB1dGlscywgbWV0YSk7XG5cdGlmIChcblx0XHRyZXN1bHQgPT09IGFjdGlvbnMuZGVmYXVsdE1lcmdlIHx8XG5cdFx0KHV0aWxzLnVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmcgJiZcblx0XHRcdHJlc3VsdCA9PT0gdm9pZCAwICYmXG5cdFx0XHR1dGlscy5tZXJnZUZ1bmN0aW9ucy5tZXJnZU90aGVycyAhPT0gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlT3RoZXJzKVxuXHQpIHtcblx0XHRyZXR1cm4gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlT3RoZXJzKHZhbHVlcyk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gc3JjL2FjdGlvbi1idWlsZGVyLnRzXG5pbXBvcnQgeyBpc05vdEZvdW5kRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL25vdC1mb3VuZC5qc1wiO1xuaW1wb3J0IHsgaXNSZWRpcmVjdEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9yZWRpcmVjdC5qc1wiO1xuXG4vLyBzcmMvdXRpbHMudHNcbnZhciBERUZBVUxUX1NFUlZFUl9FUlJPUl9NRVNTQUdFID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBleGVjdXRpbmcgdGhlIG9wZXJhdGlvbi5cIjtcbnZhciBpc0Vycm9yID0gKGVycm9yKSA9PiBlcnJvciBpbnN0YW5jZW9mIEVycm9yO1xudmFyIHdpbm5pbmdCb29sZWFuID0gKC4uLmFyZ3MpID0+IHtcblx0cmV0dXJuIGFyZ3MucmVkdWNlKChhY2MsIHYpID0+ICh0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIgPyB2IDogYWNjKSwgZmFsc2UpO1xufTtcblxuLy8gc3JjL3ZhbGlkYXRpb24tZXJyb3JzLnRzXG52YXIgYnVpbGRWYWxpZGF0aW9uRXJyb3JzID0gKGlzc3VlcykgPT4ge1xuXHRjb25zdCB2ZSA9IHt9O1xuXHRmb3IgKGNvbnN0IGlzc3VlIG9mIGlzc3Vlcykge1xuXHRcdGNvbnN0IHsgcGF0aCwgbWVzc2FnZSB9ID0gaXNzdWU7XG5cdFx0aWYgKCFwYXRoIHx8IHBhdGgubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR2ZS5fZXJyb3JzID0gdmUuX2Vycm9ycyA/IFsuLi52ZS5fZXJyb3JzLCBtZXNzYWdlXSA6IFttZXNzYWdlXTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRsZXQgcmVmID0gdmU7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykge1xuXHRcdFx0Y29uc3QgayA9IHBhdGhbaV07XG5cdFx0XHRpZiAoIXJlZltrXSkge1xuXHRcdFx0XHRyZWZba10gPSB7fTtcblx0XHRcdH1cblx0XHRcdHJlZiA9IHJlZltrXTtcblx0XHR9XG5cdFx0Y29uc3Qga2V5ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuXHRcdHJlZltrZXldID0gcmVmW2tleV0/Ll9lcnJvcnNcblx0XHRcdD8ge1xuXHRcdFx0XHRcdC4uLnN0cnVjdHVyZWRDbG9uZShyZWZba2V5XSksXG5cdFx0XHRcdFx0X2Vycm9yczogWy4uLnJlZltrZXldLl9lcnJvcnMsIG1lc3NhZ2VdLFxuXHRcdFx0XHR9XG5cdFx0XHQ6IHsgLi4uc3RydWN0dXJlZENsb25lKHJlZltrZXldKSwgX2Vycm9yczogW21lc3NhZ2VdIH07XG5cdH1cblx0cmV0dXJuIHZlO1xufTtcbnZhciBBY3Rpb25TZXJ2ZXJWYWxpZGF0aW9uRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcblx0dmFsaWRhdGlvbkVycm9ycztcblx0Y29uc3RydWN0b3IodmFsaWRhdGlvbkVycm9ycykge1xuXHRcdHN1cGVyKFwiU2VydmVyIEFjdGlvbiBzZXJ2ZXIgdmFsaWRhdGlvbiBlcnJvcihzKSBvY2N1cnJlZFwiKTtcblx0XHR0aGlzLnZhbGlkYXRpb25FcnJvcnMgPSB2YWxpZGF0aW9uRXJyb3JzO1xuXHR9XG59O1xudmFyIEFjdGlvblZhbGlkYXRpb25FcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHR2YWxpZGF0aW9uRXJyb3JzO1xuXHRjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uRXJyb3JzKSB7XG5cdFx0c3VwZXIoXCJTZXJ2ZXIgQWN0aW9uIHZhbGlkYXRpb24gZXJyb3Iocykgb2NjdXJyZWRcIik7XG5cdFx0dGhpcy52YWxpZGF0aW9uRXJyb3JzID0gdmFsaWRhdGlvbkVycm9ycztcblx0fVxufTtcbmZ1bmN0aW9uIHJldHVyblZhbGlkYXRpb25FcnJvcnMoc2NoZW1hLCB2YWxpZGF0aW9uRXJyb3JzKSB7XG5cdHRocm93IG5ldyBBY3Rpb25TZXJ2ZXJWYWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvbkVycm9ycyk7XG59XG5mdW5jdGlvbiBmb3JtYXRWYWxpZGF0aW9uRXJyb3JzKHZhbGlkYXRpb25FcnJvcnMpIHtcblx0cmV0dXJuIHZhbGlkYXRpb25FcnJvcnM7XG59XG5mdW5jdGlvbiBmb3JtYXRCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnMoYmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzKSB7XG5cdHJldHVybiBiaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnM7XG59XG5mdW5jdGlvbiBmbGF0dGVuVmFsaWRhdGlvbkVycm9ycyh2YWxpZGF0aW9uRXJyb3JzKSB7XG5cdGNvbnN0IGZsYXR0ZW5lZCA9IHtcblx0XHRmb3JtRXJyb3JzOiBbXSxcblx0XHRmaWVsZEVycm9yczoge30sXG5cdH07XG5cdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbGlkYXRpb25FcnJvcnMgPz8ge30pKSB7XG5cdFx0aWYgKGtleSA9PT0gXCJfZXJyb3JzXCIgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdGZsYXR0ZW5lZC5mb3JtRXJyb3JzID0gWy4uLnZhbHVlXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKFwiX2Vycm9yc1wiIGluIHZhbHVlKSB7XG5cdFx0XHRcdGZsYXR0ZW5lZC5maWVsZEVycm9yc1trZXldID0gWy4uLnZhbHVlLl9lcnJvcnNdO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gZmxhdHRlbmVkO1xufVxuZnVuY3Rpb24gZmxhdHRlbkJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyhiaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnMpIHtcblx0cmV0dXJuIGJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycy5tYXAoKHZlKSA9PiBmbGF0dGVuVmFsaWRhdGlvbkVycm9ycyh2ZSkpO1xufVxudmFyIEFjdGlvbk1ldGFkYXRhVmFsaWRhdGlvbkVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdHZhbGlkYXRpb25FcnJvcnM7XG5cdGNvbnN0cnVjdG9yKHZhbGlkYXRpb25FcnJvcnMpIHtcblx0XHRzdXBlcihcIkludmFsaWQgbWV0YWRhdGEgaW5wdXQuIFBsZWFzZSBiZSBzdXJlIHRvIHBhc3MgbWV0YWRhdGEgdmlhIGBtZXRhZGF0YWAgbWV0aG9kIGJlZm9yZSBkZWZpbmluZyB0aGUgYWN0aW9uLlwiKTtcblx0XHR0aGlzLm5hbWUgPSBcIkFjdGlvbk1ldGFkYXRhRXJyb3JcIjtcblx0XHR0aGlzLnZhbGlkYXRpb25FcnJvcnMgPSB2YWxpZGF0aW9uRXJyb3JzO1xuXHR9XG59O1xudmFyIEFjdGlvbk91dHB1dERhdGFWYWxpZGF0aW9uRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcblx0dmFsaWRhdGlvbkVycm9ycztcblx0Y29uc3RydWN0b3IodmFsaWRhdGlvbkVycm9ycykge1xuXHRcdHN1cGVyKFxuXHRcdFx0XCJJbnZhbGlkIGFjdGlvbiBkYXRhIChvdXRwdXQpLiBQbGVhc2UgYmUgc3VyZSB0byByZXR1cm4gZGF0YSBmb2xsb3dpbmcgdGhlIHNoYXBlIG9mIHRoZSBzY2hlbWEgcGFzc2VkIHRvIGBkYXRhU2NoZW1hYCBtZXRob2QuXCJcblx0XHQpO1xuXHRcdHRoaXMubmFtZSA9IFwiQWN0aW9uT3V0cHV0RGF0YUVycm9yXCI7XG5cdFx0dGhpcy52YWxpZGF0aW9uRXJyb3JzID0gdmFsaWRhdGlvbkVycm9ycztcblx0fVxufTtcblxuLy8gc3JjL2FjdGlvbi1idWlsZGVyLnRzXG5mdW5jdGlvbiBhY3Rpb25CdWlsZGVyKGFyZ3MpIHtcblx0Y29uc3QgYmluZEFyZ3NTY2hlbWFzID0gYXJncy5iaW5kQXJnc1NjaGVtYXMgPz8gW107XG5cdGZ1bmN0aW9uIGJ1aWxkQWN0aW9uKHsgd2l0aFN0YXRlIH0pIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0YWN0aW9uOiAoc2VydmVyQ29kZUZuLCB1dGlscykgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYXN5bmMgKC4uLmNsaWVudElucHV0cykgPT4ge1xuXHRcdFx0XHRcdGxldCBjdXJyZW50Q3R4ID0ge307XG5cdFx0XHRcdFx0Y29uc3QgbWlkZGxld2FyZVJlc3VsdCA9IHsgc3VjY2VzczogZmFsc2UgfTtcblx0XHRcdFx0XHRsZXQgcHJldlJlc3VsdCA9IHZvaWQgMDtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWRJbnB1dERhdGFzID0gW107XG5cdFx0XHRcdFx0bGV0IGZyYW1ld29ya0Vycm9yID0gbnVsbDtcblx0XHRcdFx0XHRpZiAod2l0aFN0YXRlKSB7XG5cdFx0XHRcdFx0XHRwcmV2UmVzdWx0ID0gY2xpZW50SW5wdXRzLnNwbGljZShiaW5kQXJnc1NjaGVtYXMubGVuZ3RoLCAxKVswXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggKyAxID4gY2xpZW50SW5wdXRzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Y2xpZW50SW5wdXRzLnB1c2godm9pZCAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgZXhlY3V0ZU1pZGRsZXdhcmVTdGFjayA9IGFzeW5jIChpZHggPSAwKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZnJhbWV3b3JrRXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y29uc3QgbWlkZGxld2FyZUZuID0gYXJncy5taWRkbGV3YXJlRm5zW2lkeF07XG5cdFx0XHRcdFx0XHRtaWRkbGV3YXJlUmVzdWx0LmN0eCA9IGN1cnJlbnRDdHg7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRpZiAoaWR4ID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGFyZ3MubWV0YWRhdGFTY2hlbWEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZE1kID0gYXdhaXQgYXJncy52YWxpZGF0aW9uQWRhcHRlci52YWxpZGF0ZShhcmdzLm1ldGFkYXRhU2NoZW1hLCBhcmdzLm1ldGFkYXRhKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghcGFyc2VkTWQuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgQWN0aW9uTWV0YWRhdGFWYWxpZGF0aW9uRXJyb3IoYnVpbGRWYWxpZGF0aW9uRXJyb3JzKHBhcnNlZE1kLmlzc3VlcykpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAobWlkZGxld2FyZUZuKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgbWlkZGxld2FyZUZuKHtcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gcGFzcyByYXcgY2xpZW50IGlucHV0XG5cdFx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc0NsaWVudElucHV0czogYmluZEFyZ3NTY2hlbWFzLmxlbmd0aCA/IGNsaWVudElucHV0cy5zbGljZSgwLCAtMSkgOiBbXSxcblx0XHRcdFx0XHRcdFx0XHRcdGN0eDogY3VycmVudEN0eCxcblx0XHRcdFx0XHRcdFx0XHRcdG1ldGFkYXRhOiBhcmdzLm1ldGFkYXRhLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmV4dDogYXN5bmMgKG5leHRPcHRzKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRDdHggPSBkZWVwbWVyZ2UoY3VycmVudEN0eCwgbmV4dE9wdHM/LmN0eCA/PyB7fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IGV4ZWN1dGVNaWRkbGV3YXJlU3RhY2soaWR4ICsgMSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBtaWRkbGV3YXJlUmVzdWx0O1xuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXJzZWRJbnB1dHMgPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0cy5tYXAoYXN5bmMgKGlucHV0LCBpKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpID09PSBjbGllbnRJbnB1dHMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgYXJncy5pbnB1dFNjaGVtYUZuID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhOiB2b2lkIDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYXJncy52YWxpZGF0aW9uQWRhcHRlci52YWxpZGF0ZShhd2FpdCBhcmdzLmlucHV0U2NoZW1hRm4oKSwgaW5wdXQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBhcmdzLnZhbGlkYXRpb25BZGFwdGVyLnZhbGlkYXRlKGJpbmRBcmdzU2NoZW1hc1tpXSwgaW5wdXQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdGxldCBoYXNCaW5kVmFsaWRhdGlvbkVycm9ycyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyA9IEFycmF5KHBhcnNlZElucHV0cy5sZW5ndGggLSAxKS5maWxsKHt9KTtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhcnNlZElucHV0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZWRJbnB1dHNbaV07XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAocGFyc2VkSW5wdXQuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYXJzZWRJbnB1dERhdGFzLnB1c2gocGFyc2VkSW5wdXQuZGF0YSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaSA8IHBhcnNlZElucHV0cy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzW2ldID0gYnVpbGRWYWxpZGF0aW9uRXJyb3JzKHBhcnNlZElucHV0Lmlzc3Vlcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGFzQmluZFZhbGlkYXRpb25FcnJvcnMgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBidWlsZFZhbGlkYXRpb25FcnJvcnMocGFyc2VkSW5wdXQuaXNzdWVzKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaWRkbGV3YXJlUmVzdWx0LnZhbGlkYXRpb25FcnJvcnMgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcmdzLmhhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSh2YWxpZGF0aW9uRXJyb3JzLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc0NsaWVudElucHV0czogYmluZEFyZ3NTY2hlbWFzLmxlbmd0aCA/IGNsaWVudElucHV0cy5zbGljZSgwLCAtMSkgOiBbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3R4OiBjdXJyZW50Q3R4LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZiAoaGFzQmluZFZhbGlkYXRpb25FcnJvcnMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG1pZGRsZXdhcmVSZXN1bHQuYmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhcmdzLmhhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlKGJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycywge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzQ2xpZW50SW5wdXRzOiBiaW5kQXJnc1NjaGVtYXMubGVuZ3RoID8gY2xpZW50SW5wdXRzLnNsaWNlKDAsIC0xKSA6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN0eDogY3VycmVudEN0eCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmIChtaWRkbGV3YXJlUmVzdWx0LnZhbGlkYXRpb25FcnJvcnMgfHwgbWlkZGxld2FyZVJlc3VsdC5iaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2NmQXJncyA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdHNjZkFyZ3NbMF0gPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwYXJzZWRJbnB1dDogcGFyc2VkSW5wdXREYXRhcy5hdCgtMSksXG5cdFx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc1BhcnNlZElucHV0czogcGFyc2VkSW5wdXREYXRhcy5zbGljZSgwLCAtMSksXG5cdFx0XHRcdFx0XHRcdFx0XHRjdHg6IGN1cnJlbnRDdHgsXG5cdFx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdGlmICh3aXRoU3RhdGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjZkFyZ3NbMV0gPSB7IHByZXZSZXN1bHQ6IHN0cnVjdHVyZWRDbG9uZShwcmV2UmVzdWx0KSB9O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgc2VydmVyQ29kZUZuKC4uLnNjZkFyZ3MpO1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgYXJncy5vdXRwdXRTY2hlbWEgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZERhdGEgPSBhd2FpdCBhcmdzLnZhbGlkYXRpb25BZGFwdGVyLnZhbGlkYXRlKGFyZ3Mub3V0cHV0U2NoZW1hLCBkYXRhKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghcGFyc2VkRGF0YS5zdWNjZXNzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBBY3Rpb25PdXRwdXREYXRhVmFsaWRhdGlvbkVycm9yKGJ1aWxkVmFsaWRhdGlvbkVycm9ycyhwYXJzZWREYXRhLmlzc3VlcykpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRtaWRkbGV3YXJlUmVzdWx0LnN1Y2Nlc3MgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdG1pZGRsZXdhcmVSZXN1bHQuZGF0YSA9IGRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0bWlkZGxld2FyZVJlc3VsdC5wYXJzZWRJbnB1dCA9IHBhcnNlZElucHV0RGF0YXMuYXQoLTEpO1xuXHRcdFx0XHRcdFx0XHRcdG1pZGRsZXdhcmVSZXN1bHQuYmluZEFyZ3NQYXJzZWRJbnB1dHMgPSBwYXJzZWRJbnB1dERhdGFzLnNsaWNlKDAsIC0xKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoaXNSZWRpcmVjdEVycm9yKGUpIHx8IGlzTm90Rm91bmRFcnJvcihlKSkge1xuXHRcdFx0XHRcdFx0XHRcdG1pZGRsZXdhcmVSZXN1bHQuc3VjY2VzcyA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0ZnJhbWV3b3JrRXJyb3IgPSBlO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFjdGlvblNlcnZlclZhbGlkYXRpb25FcnJvcikge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZlID0gZS52YWxpZGF0aW9uRXJyb3JzO1xuXHRcdFx0XHRcdFx0XHRcdG1pZGRsZXdhcmVSZXN1bHQudmFsaWRhdGlvbkVycm9ycyA9IGF3YWl0IFByb21pc2UucmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MuaGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlKHZlLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc0NsaWVudElucHV0czogYmluZEFyZ3NTY2hlbWFzLmxlbmd0aCA/IGNsaWVudElucHV0cy5zbGljZSgwLCAtMSkgOiBbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y3R4OiBjdXJyZW50Q3R4LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBlcnJvciA9IGlzRXJyb3IoZSkgPyBlIDogbmV3IEVycm9yKERFRkFVTFRfU0VSVkVSX0VSUk9SX01FU1NBR0UpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJldHVybmVkRXJyb3IgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0XHRhcmdzLmhhbmRsZVNlcnZlckVycm9yKGVycm9yLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBwYXNzIHJhdyBjbGllbnQgaW5wdXRcblx0XHRcdFx0XHRcdFx0XHRcdFx0YmluZEFyZ3NDbGllbnRJbnB1dHM6IGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggPyBjbGllbnRJbnB1dHMuc2xpY2UoMCwgLTEpIDogW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN0eDogY3VycmVudEN0eCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0bWlkZGxld2FyZVJlc3VsdC5zZXJ2ZXJFcnJvciA9IHJldHVybmVkRXJyb3I7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGF3YWl0IGV4ZWN1dGVNaWRkbGV3YXJlU3RhY2soKTtcblx0XHRcdFx0XHRjb25zdCBjYWxsYmFja3NUb0V4ZWN1dGUgPSBbXTtcblx0XHRcdFx0XHRpZiAoZnJhbWV3b3JrRXJyb3IpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrc1RvRXhlY3V0ZS5wdXNoKFxuXHRcdFx0XHRcdFx0XHR1dGlscz8ub25TdWNjZXNzPy4oe1xuXHRcdFx0XHRcdFx0XHRcdGRhdGE6IHZvaWQgMCxcblx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdFx0XHRjdHg6IGN1cnJlbnRDdHgsXG5cdFx0XHRcdFx0XHRcdFx0Y2xpZW50SW5wdXQ6IGNsaWVudElucHV0cy5hdCgtMSksXG5cdFx0XHRcdFx0XHRcdFx0YmluZEFyZ3NDbGllbnRJbnB1dHM6IGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggPyBjbGllbnRJbnB1dHMuc2xpY2UoMCwgLTEpIDogW10sXG5cdFx0XHRcdFx0XHRcdFx0cGFyc2VkSW5wdXQ6IHBhcnNlZElucHV0RGF0YXMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzUGFyc2VkSW5wdXRzOiBwYXJzZWRJbnB1dERhdGFzLnNsaWNlKDAsIC0xKSxcblx0XHRcdFx0XHRcdFx0XHRoYXNSZWRpcmVjdGVkOiBpc1JlZGlyZWN0RXJyb3IoZnJhbWV3b3JrRXJyb3IpLFxuXHRcdFx0XHRcdFx0XHRcdGhhc05vdEZvdW5kOiBpc05vdEZvdW5kRXJyb3IoZnJhbWV3b3JrRXJyb3IpLFxuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrc1RvRXhlY3V0ZS5wdXNoKFxuXHRcdFx0XHRcdFx0XHR1dGlscz8ub25TZXR0bGVkPy4oe1xuXHRcdFx0XHRcdFx0XHRcdG1ldGFkYXRhOiBhcmdzLm1ldGFkYXRhLFxuXHRcdFx0XHRcdFx0XHRcdGN0eDogY3VycmVudEN0eCxcblx0XHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dDogY2xpZW50SW5wdXRzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc0NsaWVudElucHV0czogYmluZEFyZ3NTY2hlbWFzLmxlbmd0aCA/IGNsaWVudElucHV0cy5zbGljZSgwLCAtMSkgOiBbXSxcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHQ6IHt9LFxuXHRcdFx0XHRcdFx0XHRcdGhhc1JlZGlyZWN0ZWQ6IGlzUmVkaXJlY3RFcnJvcihmcmFtZXdvcmtFcnJvciksXG5cdFx0XHRcdFx0XHRcdFx0aGFzTm90Rm91bmQ6IGlzTm90Rm91bmRFcnJvcihmcmFtZXdvcmtFcnJvciksXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tzVG9FeGVjdXRlKTtcblx0XHRcdFx0XHRcdHRocm93IGZyYW1ld29ya0Vycm9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBhY3Rpb25SZXN1bHQgPSB7fTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIG1pZGRsZXdhcmVSZXN1bHQudmFsaWRhdGlvbkVycm9ycyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0aWYgKHdpbm5pbmdCb29sZWFuKGFyZ3MudGhyb3dWYWxpZGF0aW9uRXJyb3JzLCB1dGlscz8udGhyb3dWYWxpZGF0aW9uRXJyb3JzKSkge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgQWN0aW9uVmFsaWRhdGlvbkVycm9yKG1pZGRsZXdhcmVSZXN1bHQudmFsaWRhdGlvbkVycm9ycyk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRhY3Rpb25SZXN1bHQudmFsaWRhdGlvbkVycm9ycyA9IG1pZGRsZXdhcmVSZXN1bHQudmFsaWRhdGlvbkVycm9ycztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBtaWRkbGV3YXJlUmVzdWx0LmJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0YWN0aW9uUmVzdWx0LmJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyA9IG1pZGRsZXdhcmVSZXN1bHQuYmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodHlwZW9mIG1pZGRsZXdhcmVSZXN1bHQuc2VydmVyRXJyb3IgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0XHRcdGlmICh1dGlscz8udGhyb3dTZXJ2ZXJFcnJvcikge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBtaWRkbGV3YXJlUmVzdWx0LnNlcnZlckVycm9yO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0YWN0aW9uUmVzdWx0LnNlcnZlckVycm9yID0gbWlkZGxld2FyZVJlc3VsdC5zZXJ2ZXJFcnJvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKG1pZGRsZXdhcmVSZXN1bHQuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBtaWRkbGV3YXJlUmVzdWx0LmRhdGEgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0XHRcdFx0YWN0aW9uUmVzdWx0LmRhdGEgPSBtaWRkbGV3YXJlUmVzdWx0LmRhdGE7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjYWxsYmFja3NUb0V4ZWN1dGUucHVzaChcblx0XHRcdFx0XHRcdFx0dXRpbHM/Lm9uU3VjY2Vzcz8uKHtcblx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdFx0XHRjdHg6IGN1cnJlbnRDdHgsXG5cdFx0XHRcdFx0XHRcdFx0ZGF0YTogYWN0aW9uUmVzdWx0LmRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0Y2xpZW50SW5wdXQ6IGNsaWVudElucHV0cy5hdCgtMSksXG5cdFx0XHRcdFx0XHRcdFx0YmluZEFyZ3NDbGllbnRJbnB1dHM6IGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggPyBjbGllbnRJbnB1dHMuc2xpY2UoMCwgLTEpIDogW10sXG5cdFx0XHRcdFx0XHRcdFx0cGFyc2VkSW5wdXQ6IHBhcnNlZElucHV0RGF0YXMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzUGFyc2VkSW5wdXRzOiBwYXJzZWRJbnB1dERhdGFzLnNsaWNlKDAsIC0xKSxcblx0XHRcdFx0XHRcdFx0XHRoYXNSZWRpcmVjdGVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRoYXNOb3RGb3VuZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFja3NUb0V4ZWN1dGUucHVzaChcblx0XHRcdFx0XHRcdFx0dXRpbHM/Lm9uRXJyb3I/Lih7XG5cdFx0XHRcdFx0XHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0Y3R4OiBjdXJyZW50Q3R4LFxuXHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzQ2xpZW50SW5wdXRzOiBiaW5kQXJnc1NjaGVtYXMubGVuZ3RoID8gY2xpZW50SW5wdXRzLnNsaWNlKDAsIC0xKSA6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBhY3Rpb25SZXN1bHQsXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjYWxsYmFja3NUb0V4ZWN1dGUucHVzaChcblx0XHRcdFx0XHRcdHV0aWxzPy5vblNldHRsZWQ/Lih7XG5cdFx0XHRcdFx0XHRcdG1ldGFkYXRhOiBhcmdzLm1ldGFkYXRhLFxuXHRcdFx0XHRcdFx0XHRjdHg6IGN1cnJlbnRDdHgsXG5cdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRiaW5kQXJnc0NsaWVudElucHV0czogYmluZEFyZ3NTY2hlbWFzLmxlbmd0aCA/IGNsaWVudElucHV0cy5zbGljZSgwLCAtMSkgOiBbXSxcblx0XHRcdFx0XHRcdFx0cmVzdWx0OiBhY3Rpb25SZXN1bHQsXG5cdFx0XHRcdFx0XHRcdGhhc1JlZGlyZWN0ZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRoYXNOb3RGb3VuZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tzVG9FeGVjdXRlKTtcblx0XHRcdFx0XHRyZXR1cm4gYWN0aW9uUmVzdWx0O1xuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XHR9O1xuXHR9XG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lIHRoZSBhY3Rpb24uXG5cdFx0ICogQHBhcmFtIHNlcnZlckNvZGVGbiBDb2RlIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBvbiB0aGUgKipzZXJ2ZXIgc2lkZSoqXG5cdFx0ICpcblx0XHQgKiB7QGxpbmsgaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2luc3RhbmNlLW1ldGhvZHMjYWN0aW9uLS1zdGF0ZWFjdGlvbiBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cblx0XHQgKi9cblx0XHRhY3Rpb246IGJ1aWxkQWN0aW9uKHsgd2l0aFN0YXRlOiBmYWxzZSB9KS5hY3Rpb24sXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lIHRoZSBzdGF0ZWZ1bCBhY3Rpb24uIFRvIGJlIHVzZWQgd2l0aCB0aGUgW2B1c2VTdGF0ZUFjdGlvbmBdKGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9leGVjdXRlLWFjdGlvbnMvaG9va3MvdXNlc3RhdGVhY3Rpb24pIGhvb2suXG5cdFx0ICogQHBhcmFtIHNlcnZlckNvZGVGbiBDb2RlIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBvbiB0aGUgKipzZXJ2ZXIgc2lkZSoqXG5cdFx0ICpcblx0XHQgKiB7QGxpbmsgaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2luc3RhbmNlLW1ldGhvZHMjYWN0aW9uLS1zdGF0ZWFjdGlvbiBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cblx0XHQgKi9cblx0XHRzdGF0ZUFjdGlvbjogYnVpbGRBY3Rpb24oeyB3aXRoU3RhdGU6IHRydWUgfSkuYWN0aW9uLFxuXHR9O1xufVxuXG4vLyBzcmMvc2FmZS1hY3Rpb24tY2xpZW50LnRzXG52YXIgU2FmZUFjdGlvbkNsaWVudCA9IGNsYXNzIF9TYWZlQWN0aW9uQ2xpZW50IHtcblx0I2hhbmRsZVNlcnZlckVycm9yO1xuXHQjbWlkZGxld2FyZUZucztcblx0I21ldGFkYXRhU2NoZW1hO1xuXHQjbWV0YWRhdGE7XG5cdCNpbnB1dFNjaGVtYUZuO1xuXHQjb3V0cHV0U2NoZW1hO1xuXHQjY3R4VHlwZTtcblx0I2JpbmRBcmdzU2NoZW1hcztcblx0I3ZhbGlkYXRpb25BZGFwdGVyO1xuXHQjaGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlO1xuXHQjaGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGU7XG5cdCNkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlO1xuXHQjdGhyb3dWYWxpZGF0aW9uRXJyb3JzO1xuXHRjb25zdHJ1Y3RvcihvcHRzKSB7XG5cdFx0dGhpcy4jbWlkZGxld2FyZUZucyA9IG9wdHMubWlkZGxld2FyZUZucztcblx0XHR0aGlzLiNoYW5kbGVTZXJ2ZXJFcnJvciA9IG9wdHMuaGFuZGxlU2VydmVyRXJyb3I7XG5cdFx0dGhpcy4jbWV0YWRhdGFTY2hlbWEgPSBvcHRzLm1ldGFkYXRhU2NoZW1hO1xuXHRcdHRoaXMuI21ldGFkYXRhID0gb3B0cy5tZXRhZGF0YTtcblx0XHR0aGlzLiNpbnB1dFNjaGVtYUZuID0gb3B0cy5pbnB1dFNjaGVtYUZuID8/IHZvaWQgMDtcblx0XHR0aGlzLiNvdXRwdXRTY2hlbWEgPSBvcHRzLm91dHB1dFNjaGVtYTtcblx0XHR0aGlzLiNiaW5kQXJnc1NjaGVtYXMgPSBvcHRzLmJpbmRBcmdzU2NoZW1hcyA/PyBbXTtcblx0XHR0aGlzLiN2YWxpZGF0aW9uQWRhcHRlciA9IG9wdHMudmFsaWRhdGlvbkFkYXB0ZXI7XG5cdFx0dGhpcy4jY3R4VHlwZSA9IG9wdHMuY3R4VHlwZTtcblx0XHR0aGlzLiNoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGUgPSBvcHRzLmhhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZTtcblx0XHR0aGlzLiNoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZSA9IG9wdHMuaGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGU7XG5cdFx0dGhpcy4jZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZSA9IG9wdHMuZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZTtcblx0XHR0aGlzLiN0aHJvd1ZhbGlkYXRpb25FcnJvcnMgPSBvcHRzLnRocm93VmFsaWRhdGlvbkVycm9ycztcblx0fVxuXHQvKipcblx0ICogVXNlIGEgbWlkZGxld2FyZSBmdW5jdGlvbi5cblx0ICogQHBhcmFtIG1pZGRsZXdhcmVGbiBNaWRkbGV3YXJlIGZ1bmN0aW9uXG5cdCAqXG5cdCAqIHtAbGluayBodHRwczovL25leHQtc2FmZS1hY3Rpb24uZGV2L2RvY3MvZGVmaW5lLWFjdGlvbnMvaW5zdGFuY2UtbWV0aG9kcyN1c2UgU2VlIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb259XG5cdCAqL1xuXHR1c2UobWlkZGxld2FyZUZuKSB7XG5cdFx0cmV0dXJuIG5ldyBfU2FmZUFjdGlvbkNsaWVudCh7XG5cdFx0XHRtaWRkbGV3YXJlRm5zOiBbLi4udGhpcy4jbWlkZGxld2FyZUZucywgbWlkZGxld2FyZUZuXSxcblx0XHRcdGhhbmRsZVNlcnZlckVycm9yOiB0aGlzLiNoYW5kbGVTZXJ2ZXJFcnJvcixcblx0XHRcdG1ldGFkYXRhU2NoZW1hOiB0aGlzLiNtZXRhZGF0YVNjaGVtYSxcblx0XHRcdG1ldGFkYXRhOiB0aGlzLiNtZXRhZGF0YSxcblx0XHRcdGlucHV0U2NoZW1hRm46IHRoaXMuI2lucHV0U2NoZW1hRm4sXG5cdFx0XHRvdXRwdXRTY2hlbWE6IHRoaXMuI291dHB1dFNjaGVtYSxcblx0XHRcdGJpbmRBcmdzU2NoZW1hczogdGhpcy4jYmluZEFyZ3NTY2hlbWFzLFxuXHRcdFx0dmFsaWRhdGlvbkFkYXB0ZXI6IHRoaXMuI3ZhbGlkYXRpb25BZGFwdGVyLFxuXHRcdFx0aGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHRoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jaGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHRjdHhUeXBlOiB7fSxcblx0XHRcdGRlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2RlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHR0aHJvd1ZhbGlkYXRpb25FcnJvcnM6IHRoaXMuI3Rocm93VmFsaWRhdGlvbkVycm9ycyxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0ICogRGVmaW5lIG1ldGFkYXRhIGZvciB0aGUgYWN0aW9uLlxuXHQgKiBAcGFyYW0gZGF0YSBNZXRhZGF0YSB3aXRoIHRoZSBzYW1lIHR5cGUgYXMgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgW2BkZWZpbmVNZXRhZGF0YVNjaGVtYWBdKGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9kZWZpbmUtYWN0aW9ucy9jcmVhdGUtdGhlLWNsaWVudCNkZWZpbmVtZXRhZGF0YXNjaGVtYSkgb3B0aW9uYWwgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb25cblx0ICpcblx0ICoge0BsaW5rIGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9kZWZpbmUtYWN0aW9ucy9pbnN0YW5jZS1tZXRob2RzI21ldGFkYXRhIFNlZSBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9ufVxuXHQgKi9cblx0bWV0YWRhdGEoZGF0YSkge1xuXHRcdHJldHVybiBuZXcgX1NhZmVBY3Rpb25DbGllbnQoe1xuXHRcdFx0bWlkZGxld2FyZUZuczogdGhpcy4jbWlkZGxld2FyZUZucyxcblx0XHRcdGhhbmRsZVNlcnZlckVycm9yOiB0aGlzLiNoYW5kbGVTZXJ2ZXJFcnJvcixcblx0XHRcdG1ldGFkYXRhU2NoZW1hOiB0aGlzLiNtZXRhZGF0YVNjaGVtYSxcblx0XHRcdG1ldGFkYXRhOiBkYXRhLFxuXHRcdFx0aW5wdXRTY2hlbWFGbjogdGhpcy4jaW5wdXRTY2hlbWFGbixcblx0XHRcdGJpbmRBcmdzU2NoZW1hczogdGhpcy4jYmluZEFyZ3NTY2hlbWFzLFxuXHRcdFx0b3V0cHV0U2NoZW1hOiB0aGlzLiNvdXRwdXRTY2hlbWEsXG5cdFx0XHR2YWxpZGF0aW9uQWRhcHRlcjogdGhpcy4jdmFsaWRhdGlvbkFkYXB0ZXIsXG5cdFx0XHRoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGhhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGN0eFR5cGU6IHt9LFxuXHRcdFx0ZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdHRocm93VmFsaWRhdGlvbkVycm9yczogdGhpcy4jdGhyb3dWYWxpZGF0aW9uRXJyb3JzLFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQgKiBEZWZpbmUgdGhlIGlucHV0IHZhbGlkYXRpb24gc2NoZW1hIGZvciB0aGUgYWN0aW9uLlxuXHQgKiBAcGFyYW0gaW5wdXRTY2hlbWEgSW5wdXQgdmFsaWRhdGlvbiBzY2hlbWFcblx0ICogQHBhcmFtIHV0aWxzIE9wdGlvbmFsIHV0aWxzIG9iamVjdFxuXHQgKlxuXHQgKiB7QGxpbmsgaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2NyZWF0ZS10aGUtY2xpZW50I2lucHV0c2NoZW1hIFNlZSBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9ufVxuXHQgKi9cblx0c2NoZW1hKGlucHV0U2NoZW1hLCB1dGlscykge1xuXHRcdHJldHVybiBuZXcgX1NhZmVBY3Rpb25DbGllbnQoe1xuXHRcdFx0bWlkZGxld2FyZUZuczogdGhpcy4jbWlkZGxld2FyZUZucyxcblx0XHRcdGhhbmRsZVNlcnZlckVycm9yOiB0aGlzLiNoYW5kbGVTZXJ2ZXJFcnJvcixcblx0XHRcdG1ldGFkYXRhU2NoZW1hOiB0aGlzLiNtZXRhZGF0YVNjaGVtYSxcblx0XHRcdG1ldGFkYXRhOiB0aGlzLiNtZXRhZGF0YSxcblx0XHRcdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0XHRcdGlucHV0U2NoZW1hRm46XG5cdFx0XHRcdGlucHV0U2NoZW1hW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09IFwiQXN5bmNGdW5jdGlvblwiXG5cdFx0XHRcdFx0PyBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHByZXZTY2hlbWEgPSBhd2FpdCB0aGlzLiNpbnB1dFNjaGVtYUZuPy4oKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGlucHV0U2NoZW1hKHByZXZTY2hlbWEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdDogYXN5bmMgKCkgPT4gaW5wdXRTY2hlbWEsXG5cdFx0XHRiaW5kQXJnc1NjaGVtYXM6IHRoaXMuI2JpbmRBcmdzU2NoZW1hcyxcblx0XHRcdG91dHB1dFNjaGVtYTogdGhpcy4jb3V0cHV0U2NoZW1hLFxuXHRcdFx0dmFsaWRhdGlvbkFkYXB0ZXI6IHRoaXMuI3ZhbGlkYXRpb25BZGFwdGVyLFxuXHRcdFx0aGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB1dGlscz8uaGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlID8/IHRoaXMuI2hhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGhhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGN0eFR5cGU6IHt9LFxuXHRcdFx0ZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdHRocm93VmFsaWRhdGlvbkVycm9yczogdGhpcy4jdGhyb3dWYWxpZGF0aW9uRXJyb3JzLFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQgKiBEZWZpbmUgdGhlIGJpbmQgYXJncyBpbnB1dCB2YWxpZGF0aW9uIHNjaGVtYSBmb3IgdGhlIGFjdGlvbi5cblx0ICogQHBhcmFtIGJpbmRBcmdzU2NoZW1hcyBCaW5kIGFyZ3MgaW5wdXQgdmFsaWRhdGlvbiBzY2hlbWFzXG5cdCAqIEBwYXJhbSB1dGlscyBPcHRpb25hbCB1dGlscyBvYmplY3Rcblx0ICpcblx0ICoge0BsaW5rIGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9kZWZpbmUtYWN0aW9ucy9pbnN0YW5jZS1tZXRob2RzI2JpbmRhcmdzc2NoZW1hcyBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cblx0ICovXG5cdGJpbmRBcmdzU2NoZW1hcyhiaW5kQXJnc1NjaGVtYXMsIHV0aWxzKSB7XG5cdFx0cmV0dXJuIG5ldyBfU2FmZUFjdGlvbkNsaWVudCh7XG5cdFx0XHRtaWRkbGV3YXJlRm5zOiB0aGlzLiNtaWRkbGV3YXJlRm5zLFxuXHRcdFx0aGFuZGxlU2VydmVyRXJyb3I6IHRoaXMuI2hhbmRsZVNlcnZlckVycm9yLFxuXHRcdFx0bWV0YWRhdGFTY2hlbWE6IHRoaXMuI21ldGFkYXRhU2NoZW1hLFxuXHRcdFx0bWV0YWRhdGE6IHRoaXMuI21ldGFkYXRhLFxuXHRcdFx0aW5wdXRTY2hlbWFGbjogdGhpcy4jaW5wdXRTY2hlbWFGbixcblx0XHRcdGJpbmRBcmdzU2NoZW1hcyxcblx0XHRcdG91dHB1dFNjaGVtYTogdGhpcy4jb3V0cHV0U2NoZW1hLFxuXHRcdFx0dmFsaWRhdGlvbkFkYXB0ZXI6IHRoaXMuI3ZhbGlkYXRpb25BZGFwdGVyLFxuXHRcdFx0aGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHRoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZTpcblx0XHRcdFx0dXRpbHM/LmhhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlID8/IHRoaXMuI2hhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0Y3R4VHlwZToge30sXG5cdFx0XHRkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0dGhyb3dWYWxpZGF0aW9uRXJyb3JzOiB0aGlzLiN0aHJvd1ZhbGlkYXRpb25FcnJvcnMsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCAqIERlZmluZSB0aGUgb3V0cHV0IGRhdGEgdmFsaWRhdGlvbiBzY2hlbWEgZm9yIHRoZSBhY3Rpb24uXG5cdCAqIEBwYXJhbSBzY2hlbWEgT3V0cHV0IGRhdGEgdmFsaWRhdGlvbiBzY2hlbWFcblx0ICpcblx0ICoge0BsaW5rIGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9kZWZpbmUtYWN0aW9ucy9jcmVhdGUtdGhlLWNsaWVudCNvdXRwdXRzY2hlbWEgU2VlIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb259XG5cdCAqL1xuXHRvdXRwdXRTY2hlbWEoZGF0YVNjaGVtYSkge1xuXHRcdHJldHVybiBuZXcgX1NhZmVBY3Rpb25DbGllbnQoe1xuXHRcdFx0bWlkZGxld2FyZUZuczogdGhpcy4jbWlkZGxld2FyZUZucyxcblx0XHRcdGhhbmRsZVNlcnZlckVycm9yOiB0aGlzLiNoYW5kbGVTZXJ2ZXJFcnJvcixcblx0XHRcdG1ldGFkYXRhU2NoZW1hOiB0aGlzLiNtZXRhZGF0YVNjaGVtYSxcblx0XHRcdG1ldGFkYXRhOiB0aGlzLiNtZXRhZGF0YSxcblx0XHRcdGlucHV0U2NoZW1hRm46IHRoaXMuI2lucHV0U2NoZW1hRm4sXG5cdFx0XHRiaW5kQXJnc1NjaGVtYXM6IHRoaXMuI2JpbmRBcmdzU2NoZW1hcyxcblx0XHRcdG91dHB1dFNjaGVtYTogZGF0YVNjaGVtYSxcblx0XHRcdHZhbGlkYXRpb25BZGFwdGVyOiB0aGlzLiN2YWxpZGF0aW9uQWRhcHRlcixcblx0XHRcdGhhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jaGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0aGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0Y3R4VHlwZToge30sXG5cdFx0XHRkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0dGhyb3dWYWxpZGF0aW9uRXJyb3JzOiB0aGlzLiN0aHJvd1ZhbGlkYXRpb25FcnJvcnMsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCAqIERlZmluZSB0aGUgYWN0aW9uLlxuXHQgKiBAcGFyYW0gc2VydmVyQ29kZUZuIENvZGUgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIG9uIHRoZSAqKnNlcnZlciBzaWRlKipcblx0ICogQHBhcmFtIFtjYl0gT3B0aW9uYWwgY2FsbGJhY2tzIHRoYXQgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgYWN0aW9uIGV4ZWN1dGlvbiwgb24gdGhlIHNlcnZlci5cblx0ICpcblx0ICoge0BsaW5rIGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9kZWZpbmUtYWN0aW9ucy9pbnN0YW5jZS1tZXRob2RzI2FjdGlvbi0tc3RhdGVhY3Rpb24gU2VlIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb259XG5cdCAqL1xuXHRhY3Rpb24oc2VydmVyQ29kZUZuLCB1dGlscykge1xuXHRcdHJldHVybiBhY3Rpb25CdWlsZGVyKHtcblx0XHRcdGhhbmRsZVNlcnZlckVycm9yOiB0aGlzLiNoYW5kbGVTZXJ2ZXJFcnJvcixcblx0XHRcdG1pZGRsZXdhcmVGbnM6IHRoaXMuI21pZGRsZXdhcmVGbnMsXG5cdFx0XHRjdHhUeXBlOiB0aGlzLiNjdHhUeXBlLFxuXHRcdFx0bWV0YWRhdGFTY2hlbWE6IHRoaXMuI21ldGFkYXRhU2NoZW1hLFxuXHRcdFx0bWV0YWRhdGE6IHRoaXMuI21ldGFkYXRhLFxuXHRcdFx0aW5wdXRTY2hlbWFGbjogdGhpcy4jaW5wdXRTY2hlbWFGbixcblx0XHRcdGJpbmRBcmdzU2NoZW1hczogdGhpcy4jYmluZEFyZ3NTY2hlbWFzLFxuXHRcdFx0b3V0cHV0U2NoZW1hOiB0aGlzLiNvdXRwdXRTY2hlbWEsXG5cdFx0XHR2YWxpZGF0aW9uQWRhcHRlcjogdGhpcy4jdmFsaWRhdGlvbkFkYXB0ZXIsXG5cdFx0XHRoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGhhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdHRocm93VmFsaWRhdGlvbkVycm9yczogdGhpcy4jdGhyb3dWYWxpZGF0aW9uRXJyb3JzLFxuXHRcdH0pLmFjdGlvbihzZXJ2ZXJDb2RlRm4sIHV0aWxzKTtcblx0fVxuXHQvKipcblx0ICogRGVmaW5lIHRoZSBzdGF0ZWZ1bCBhY3Rpb24uXG5cdCAqIFRvIGJlIHVzZWQgd2l0aCB0aGUgW2B1c2VTdGF0ZUFjdGlvbmBdKGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9leGVjdXRlLWFjdGlvbnMvaG9va3MvdXNlc3RhdGVhY3Rpb24pIGhvb2suXG5cdCAqIEBwYXJhbSBzZXJ2ZXJDb2RlRm4gQ29kZSB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgb24gdGhlICoqc2VydmVyIHNpZGUqKlxuXHQgKiBAcGFyYW0gW2NiXSBPcHRpb25hbCBjYWxsYmFja3MgdGhhdCB3aWxsIGJlIGNhbGxlZCBhZnRlciBhY3Rpb24gZXhlY3V0aW9uLCBvbiB0aGUgc2VydmVyLlxuXHQgKlxuXHQgKiB7QGxpbmsgaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2luc3RhbmNlLW1ldGhvZHMjYWN0aW9uLS1zdGF0ZWFjdGlvbiBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cblx0ICovXG5cdHN0YXRlQWN0aW9uKHNlcnZlckNvZGVGbiwgdXRpbHMpIHtcblx0XHRyZXR1cm4gYWN0aW9uQnVpbGRlcih7XG5cdFx0XHRoYW5kbGVTZXJ2ZXJFcnJvcjogdGhpcy4jaGFuZGxlU2VydmVyRXJyb3IsXG5cdFx0XHRtaWRkbGV3YXJlRm5zOiB0aGlzLiNtaWRkbGV3YXJlRm5zLFxuXHRcdFx0Y3R4VHlwZTogdGhpcy4jY3R4VHlwZSxcblx0XHRcdG1ldGFkYXRhU2NoZW1hOiB0aGlzLiNtZXRhZGF0YVNjaGVtYSxcblx0XHRcdG1ldGFkYXRhOiB0aGlzLiNtZXRhZGF0YSxcblx0XHRcdGlucHV0U2NoZW1hRm46IHRoaXMuI2lucHV0U2NoZW1hRm4sXG5cdFx0XHRiaW5kQXJnc1NjaGVtYXM6IHRoaXMuI2JpbmRBcmdzU2NoZW1hcyxcblx0XHRcdG91dHB1dFNjaGVtYTogdGhpcy4jb3V0cHV0U2NoZW1hLFxuXHRcdFx0dmFsaWRhdGlvbkFkYXB0ZXI6IHRoaXMuI3ZhbGlkYXRpb25BZGFwdGVyLFxuXHRcdFx0aGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHRoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jaGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHR0aHJvd1ZhbGlkYXRpb25FcnJvcnM6IHRoaXMuI3Rocm93VmFsaWRhdGlvbkVycm9ycyxcblx0XHR9KS5zdGF0ZUFjdGlvbihzZXJ2ZXJDb2RlRm4sIHV0aWxzKTtcblx0fVxufTtcblxuLy8gc3JjL21pZGRsZXdhcmUudHNcbnZhciBjcmVhdGVNaWRkbGV3YXJlID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGRlZmluZTogKG1pZGRsZXdhcmVGbikgPT4gbWlkZGxld2FyZUZuLFxuXHR9O1xufTtcblxuLy8gc3JjL2luZGV4LnRzXG52YXIgY3JlYXRlU2FmZUFjdGlvbkNsaWVudCA9IChjcmVhdGVPcHRzKSA9PiB7XG5cdGNvbnN0IGhhbmRsZVNlcnZlckVycm9yID1cblx0XHRjcmVhdGVPcHRzPy5oYW5kbGVTZXJ2ZXJFcnJvciB8fFxuXHRcdCgoZSkgPT4ge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkFjdGlvbiBlcnJvcjpcIiwgZS5tZXNzYWdlKTtcblx0XHRcdHJldHVybiBERUZBVUxUX1NFUlZFUl9FUlJPUl9NRVNTQUdFO1xuXHRcdH0pO1xuXHRyZXR1cm4gbmV3IFNhZmVBY3Rpb25DbGllbnQoe1xuXHRcdG1pZGRsZXdhcmVGbnM6IFthc3luYyAoeyBuZXh0IH0pID0+IG5leHQoeyBjdHg6IHt9IH0pXSxcblx0XHRoYW5kbGVTZXJ2ZXJFcnJvcixcblx0XHRpbnB1dFNjaGVtYUZuOiB2b2lkIDAsXG5cdFx0YmluZEFyZ3NTY2hlbWFzOiBbXSxcblx0XHRvdXRwdXRTY2hlbWE6IHZvaWQgMCxcblx0XHR2YWxpZGF0aW9uQWRhcHRlcjogY3JlYXRlT3B0cz8udmFsaWRhdGlvbkFkYXB0ZXIgPz8gem9kQWRhcHRlcigpLFxuXHRcdC8vIHVzZSB6b2QgYWRhcHRlciBieSBkZWZhdWx0XG5cdFx0Y3R4VHlwZToge30sXG5cdFx0bWV0YWRhdGFTY2hlbWE6IGNyZWF0ZU9wdHM/LmRlZmluZU1ldGFkYXRhU2NoZW1hPy4oKSA/PyB2b2lkIDAsXG5cdFx0bWV0YWRhdGE6IHZvaWQgMCxcblx0XHRkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlOiBjcmVhdGVPcHRzPy5kZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlID8/IFwiZm9ybWF0dGVkXCIsXG5cdFx0dGhyb3dWYWxpZGF0aW9uRXJyb3JzOiBCb29sZWFuKGNyZWF0ZU9wdHM/LnRocm93VmFsaWRhdGlvbkVycm9ycyksXG5cdFx0aGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlOlxuXHRcdFx0Y3JlYXRlT3B0cz8uZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZSA9PT0gXCJmbGF0dGVuZWRcIiA/IGZsYXR0ZW5WYWxpZGF0aW9uRXJyb3JzIDogZm9ybWF0VmFsaWRhdGlvbkVycm9ycyxcblx0XHRoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZTpcblx0XHRcdGNyZWF0ZU9wdHM/LmRlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGUgPT09IFwiZmxhdHRlbmVkXCJcblx0XHRcdFx0PyBmbGF0dGVuQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzXG5cdFx0XHRcdDogZm9ybWF0QmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzLFxuXHR9KTtcbn07XG5leHBvcnQge1xuXHRBY3Rpb25NZXRhZGF0YVZhbGlkYXRpb25FcnJvcixcblx0QWN0aW9uT3V0cHV0RGF0YVZhbGlkYXRpb25FcnJvcixcblx0QWN0aW9uVmFsaWRhdGlvbkVycm9yLFxuXHRERUZBVUxUX1NFUlZFUl9FUlJPUl9NRVNTQUdFLFxuXHRjcmVhdGVNaWRkbGV3YXJlLFxuXHRjcmVhdGVTYWZlQWN0aW9uQ2xpZW50LFxuXHRmbGF0dGVuQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzLFxuXHRmbGF0dGVuVmFsaWRhdGlvbkVycm9ycyxcblx0Zm9ybWF0QmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzLFxuXHRmb3JtYXRWYWxpZGF0aW9uRXJyb3JzLFxuXHRyZXR1cm5WYWxpZGF0aW9uRXJyb3JzLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/next-safe-action/dist/index.mjs\n");

/***/ })

};
;